!function(){"use strict";var n,t,e,r,o,i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(n){return function(){return n}},c=a(!1),l=a(!0),y={noop:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]},noarg:function(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e()}},compose:function(e,r){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e(r.apply(null,arguments))}},constant:a,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(i){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var u=new Array(arguments.length-1),e=1;e<arguments.length;e++)u[e-1]=arguments[e];return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var o=u.concat(e);return i.apply(null,o)}},not:function(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return!e.apply(null,arguments)}},die:function(n){return function(){throw new Error(n)}},apply:function(n){return n()},call:function(n){n()},never:c,always:l},s=y.never,f=y.always,d=function(){return m},m=(r={fold:function(n,t){return n()},is:s,isSome:s,isNone:f,getOr:e=function(n){return n},getOrThunk:t=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},or:e,orThunk:t,map:d,ap:d,each:function(){},bind:d,flatten:d,exists:s,forall:f,filter:d,equals:n=function(n){return n.isNone()},equals_:n,toArray:function(){return[]},toString:y.constant("none()")},Object.freeze&&Object.freeze(r),r),g=function(e){var n=function(){return e},t=function(){return o},r=function(n){return n(e)},o={fold:function(n,t){return t(e)},is:function(n){return e===n},isSome:f,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,or:t,orThunk:t,map:function(n){return g(n(e))},ap:function(n){return n.fold(d,function(n){return g(n(e))})},each:function(n){n(e)},bind:r,flatten:n,exists:r,forall:r,filter:function(n){return n(e)?o:m},equals:function(n){return n.is(e)},equals_:function(n,t){return n.fold(s,function(n){return t(e,n)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},x={some:g,none:d,from:function(n){return null==n?m:g(n)}},h=function(t){return function(n){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(n)===t}},p={isString:h("string"),isObject:h("object"),isArray:h("array"),isNull:h("null"),isBoolean:h("boolean"),isUndefined:h("undefined"),isFunction:h("function"),isNumber:h("number")},v=void 0===(o=Array.prototype.indexOf)?function(n,t){return D(n,t)}:function(n,t){return o.call(n,t)},b=function(n,t){return-1<v(n,t)},w=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o,n)}return r},C=function(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e,n)},R=function(n,t){for(var e=n.length-1;0<=e;e--)t(n[e],e,n)},S=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r,n)&&e.push(i)}return e},T=function(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e,n))return x.some(e);return x.none()},D=function(n,t){for(var e=0,r=n.length;e<r;++e)if(n[e]===t)return e;return-1},k=Array.prototype.push,A=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!Array.prototype.isPrototypeOf(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);k.apply(t,n[e])}return t},O=function(n,t){for(var e=0,r=n.length;e<r;++e)if(!0!==t(n[e],e,n))return!1;return!0},N=Array.prototype.slice,E=p.isFunction(Array.from)?Array.from:function(n){return N.call(n)},P={map:w,each:C,eachr:R,partition:function(n,t){for(var e=[],r=[],o=0,i=n.length;o<i;o++){var u=n[o];(t(u,o,n)?e:r).push(u)}return{pass:e,fail:r}},filter:S,groupBy:function(n,t){if(0===n.length)return[];for(var e=t(n[0]),r=[],o=[],i=0,u=n.length;i<u;i++){var a=n[i],c=t(a);c!==e&&(r.push(o),o=[]),e=c,o.push(a)}return 0!==o.length&&r.push(o),r},indexOf:function(n,t){var e=v(n,t);return-1===e?x.none():x.some(e)},foldr:function(n,t,e){return R(n,function(n){e=t(e,n)}),e},foldl:function(n,t,e){return C(n,function(n){e=t(e,n)}),e},find:function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e,n))return x.some(o)}return x.none()},findIndex:T,flatten:A,bind:function(n,t){var e=w(n,t);return A(e)},forall:O,exists:function(n,t){return T(n,t).isSome()},contains:b,equal:function(n,e){return n.length===e.length&&O(n,function(n,t){return n===e[t]})},reverse:function(n){var t=N.call(n,0);return t.reverse(),t},chunk:function(n,t){for(var e=[],r=0;r<n.length;r+=t){var o=n.slice(r,r+t);e.push(o)}return e},difference:function(n,t){return S(n,function(n){return!b(t,n)})},mapToObject:function(n,t){for(var e={},r=0,o=n.length;r<o;r++){var i=n[r];e[String(i)]=t(i,r)}return e},pure:function(n){return[n]},sort:function(n,t){var e=N.call(n,0);return e.sort(t),e},range:function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},head:function(n){return 0===n.length?x.none():x.some(n[0])},last:function(n){return 0===n.length?x.none():x.some(n[n.length-1])},from:E},B=void 0===(i=Object.keys)?function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t}:i,I=function(n,t){for(var e=B(n),r=0,o=e.length;r<o;r++){var i=e[r];t(n[i],i,n)}},W=function(r,o){var i={};return I(r,function(n,t){var e=o(n,t,r);i[e.k]=e.v}),i},M=function(n,e){var r=[];return I(n,function(n,t){r.push(e(n,t))}),r},L=function(n){return M(n,function(n){return n})},q={bifilter:function(n,e){var r={},o={};return I(n,function(n,t){(e(n,t)?r:o)[t]=n}),{t:r,f:o}},each:I,map:function(n,r){return W(n,function(n,t,e){return{k:t,v:r(n,t,e)}})},mapToArray:M,tupleMap:W,find:function(n,t){for(var e=B(n),r=0,o=e.length;r<o;r++){var i=e[r],u=n[i];if(t(u,i,n))return x.some(u)}return x.none()},keys:B,values:L,size:function(n){return L(n).length}},j=function(n){return n.slice(0).sort()},_=function(n,t){throw new Error("All required keys ("+j(n).join(", ")+") were not specified. Specified keys were: "+j(t).join(", ")+".")},z=function(n){throw new Error("Unsupported keys for object: "+j(n).join(", "))},F=function(t,n){if(!p.isArray(n))throw new Error("The "+t+" fields must be an array. Was: "+n+".");P.each(n,function(n){if(!p.isString(n))throw new Error("The value "+n+" in the "+t+" fields was not a string.")})},H=function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+j(n).join(", ")+") were not.")},U=function(n){var e=j(n);P.find(e,function(n,t){return t<e.length-1&&n===e[t+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},V={immutable:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return P.each(t,function(n,t){r[n]=y.constant(e[t])}),r}},immutableBag:function(o,i){var u=o.concat(i);if(0===u.length)throw new Error("You must specify at least one required or optional field.");return F("required",o),F("optional",i),U(u),function(t){var e=q.keys(t);P.forall(o,function(n){return P.contains(e,n)})||_(o,e);var n=P.filter(e,function(n){return!P.contains(u,n)});0<n.length&&z(n);var r={};return P.each(o,function(n){r[n]=y.constant(t[n])}),P.each(i,function(n){r[n]=y.constant(Object.prototype.hasOwnProperty.call(t,n)?x.some(t[n]):x.none())}),r}}},G=V.immutable("width","height"),X=V.immutable("rows","columns"),Y=V.immutable("row","column"),K=V.immutable("x","y"),J=V.immutable("element","rowspan","colspan"),Q=V.immutable("element","rowspan","colspan","isNew"),Z={dimensions:G,grid:X,address:Y,coords:K,extended:V.immutable("element","rowspan","colspan","row","column"),detail:J,detailnew:Q,rowdata:V.immutable("element","cells","section"),elementnew:V.immutable("element","isNew"),rowdatanew:V.immutable("element","cells","section","isNew"),rowcells:V.immutable("cells","section"),rowdetails:V.immutable("details","section"),bounds:V.immutable("startRow","startCol","finishRow","finishCol")},nn=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:y.constant(n)}},tn={fromHtml:function(n,t){var e=(t||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return nn(e.childNodes[0])},fromTag:function(n,t){var e=(t||document).createElement(n);return nn(e)},fromText:function(n,t){var e=(t||document).createTextNode(n);return nn(e)},fromDom:nn,fromPoint:function(n,t,e){return x.from(n.dom().elementFromPoint(t,e)).map(nn)}},en=8,rn=9,on=1,un=3,an=on,cn=rn,ln=function(n){return n.nodeType!==an&&n.nodeType!==cn||0===n.childElementCount},sn={all:function(n,t){var e=void 0===t?document:t.dom();return ln(e)?[]:P.map(e.querySelectorAll(n),tn.fromDom)},is:function(n,t){var e=n.dom();if(e.nodeType!==an)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(n,t){var e=void 0===t?document:t.dom();return ln(e)?x.none():x.from(e.querySelector(n)).map(tn.fromDom)}},fn=function(n,t){for(var e=[],r=function(n){return e.push(n),t(n)},o=t(n);(o=o.bind(r)).isSome(););return e},dn="undefined"!=typeof window?window:Function("return this;")(),mn=function(n,t){for(var e=null!=t?t:dn,r=0;r<n.length&&null!=e;++r)e=e[n[r]];return e},gn=function(n,t){var e=n.split(".");return mn(e,t)},hn=function(n,t){var e=gn(n,t);if(null==e)throw n+" not available on this browser";return e},pn=function(){return hn("Node")},vn=function(n,t,e){return 0!=(n.compareDocumentPosition(t)&e)},bn=function(n,t){return vn(n,t,pn().DOCUMENT_POSITION_CONTAINED_BY)},wn=function(n){var t,e=!1;return function(){return e||(e=!0,t=n.apply(null,arguments)),t}},yn=function(){return xn(0,0)},xn=function(n,t){return{major:n,minor:t}},Cn={nu:xn,detect:function(n,t){var e=String(t).toLowerCase();return 0===n.length?yn():function(n,t){var e=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}}(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return xn(r(1),r(2))}(n,e)},unknown:yn},Rn="Firefox",Sn=function(n,t){return function(){return t===n}},Tn=function(n){var t=n.current;return{current:t,version:n.version,isEdge:Sn("Edge",t),isChrome:Sn("Chrome",t),isIE:Sn("IE",t),isOpera:Sn("Opera",t),isFirefox:Sn(Rn,t),isSafari:Sn("Safari",t)}},Dn={unknown:function(){return Tn({current:void 0,version:Cn.unknown()})},nu:Tn,edge:y.constant("Edge"),chrome:y.constant("Chrome"),ie:y.constant("IE"),opera:y.constant("Opera"),firefox:y.constant(Rn),safari:y.constant("Safari")},kn="Windows",An="Android",On="Solaris",Nn="FreeBSD",En=function(n,t){return function(){return t===n}},Pn=function(n){var t=n.current;return{current:t,version:n.version,isWindows:En(kn,t),isiOS:En("iOS",t),isAndroid:En(An,t),isOSX:En("OSX",t),isLinux:En("Linux",t),isSolaris:En(On,t),isFreeBSD:En(Nn,t)}},Bn={unknown:function(){return Pn({current:void 0,version:Cn.unknown()})},nu:Pn,windows:y.constant(kn),ios:y.constant("iOS"),android:y.constant(An),linux:y.constant("Linux"),osx:y.constant("OSX"),solaris:y.constant(On),freebsd:y.constant(Nn)},In=function(n,t){var e=String(t).toLowerCase();return P.find(n,function(n){return n.search(e)})},Wn=function(n,e){return In(n,e).map(function(n){var t=Cn.detect(n.versionRegexes,e);return{current:n.name,version:t}})},Mn=function(n,e){return In(n,e).map(function(n){var t=Cn.detect(n.versionRegexes,e);return{current:n.name,version:t}})},Ln=function(n,t){return t+n},qn=function(n,t){return n+t},jn=function(n,t){return n.substring(t)},_n=function(n,t){return n.substring(0,n.length-t)},zn=function(n){return""===n?x.none():x.some(n.substr(0,1))},Fn=function(n){return""===n?x.none():x.some(n.substring(1))},Hn=function(n,t,e){return""===t||!(n.length<t.length)&&n.substr(e,e+t.length)===t},Un=function(n,t){return Hn(n,t,0)},Vn=function(n,t){return Hn(n,t,n.length-t.length)},Gn={supplant:function(n,o){return n.replace(/\${([^{}]*)}/g,function(n,t){var e,r=o[t];return"string"==(e=typeof r)||"number"===e?r:n})},startsWith:Un,removeLeading:function(n,t){return Un(n,t)?jn(n,t.length):n},removeTrailing:function(n,t){return Vn(n,t)?_n(n,t.length):n},ensureLeading:function(n,t){return Un(n,t)?n:Ln(n,t)},ensureTrailing:function(n,t){return Vn(n,t)?n:qn(n,t)},endsWith:Vn,contains:function(n,t){return-1!==n.indexOf(t)},trim:function(n){return n.replace(/^\s+|\s+$/g,"")},lTrim:function(n){return n.replace(/^\s+/g,"")},rTrim:function(n){return n.replace(/\s+$/g,"")},capitalize:function(n){return zn(n).bind(function(t){return Fn(n).map(function(n){return t.toUpperCase()+n})}).getOr(n)}},Xn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Yn=function(t){return function(n){return Gn.contains(n,t)}},$n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Gn.contains(n,"edge/")&&Gn.contains(n,"chrome")&&Gn.contains(n,"safari")&&Gn.contains(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xn],search:function(n){return Gn.contains(n,"chrome")&&!Gn.contains(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Gn.contains(n,"msie")||Gn.contains(n,"trident")}},{name:"Opera",versionRegexes:[Xn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Yn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Yn("firefox")},{name:"Safari",versionRegexes:[Xn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Gn.contains(n,"safari")||Gn.contains(n,"mobile/"))&&Gn.contains(n,"applewebkit")}}],Kn=[{name:"Windows",search:Yn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Gn.contains(n,"iphone")||Gn.contains(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Yn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Yn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Yn("linux"),versionRegexes:[]},{name:"Solaris",search:Yn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Yn("freebsd"),versionRegexes:[]}],Jn={browsers:y.constant($n),oses:y.constant(Kn)},Qn=function(n){var t,e,r,o,i,u,a,c,l,s,f,d=Jn.browsers(),m=Jn.oses(),g=Wn(d,n).fold(Dn.unknown,Dn.nu),h=Mn(m,n).fold(Bn.unknown,Bn.nu);return{browser:g,os:h,deviceType:(e=g,r=n,o=(t=h).isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,u=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,c=o||u||a&&!0===/mobile/i.test(r),l=t.isiOS()||t.isAndroid(),s=l&&!c,f=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),{isiPad:y.constant(o),isiPhone:y.constant(i),isTablet:y.constant(c),isPhone:y.constant(s),isTouch:y.constant(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:y.constant(f)})}},Zn={detect:wn(function(){var n=navigator.userAgent;return Qn(n)})},nt=function(n,t){return n.dom()===t.dom()},tt=Zn.detect().browser.isIE()?function(n,t){return bn(n.dom(),t.dom())}:function(n,t){var e=n.dom(),r=t.dom();return e!==r&&e.contains(r)},et={eq:nt,isEqualNode:function(n,t){return n.dom().isEqualNode(t.dom())},member:function(n,t){return P.exists(t,y.curry(nt,n))},contains:tt,is:sn.is},rt=function(n){return tn.fromDom(n.dom().ownerDocument)},ot=function(n){var t=n.dom();return x.from(t.parentNode).map(tn.fromDom)},it=function(n){var t=n.dom();return x.from(t.previousSibling).map(tn.fromDom)},ut=function(n){var t=n.dom();return x.from(t.nextSibling).map(tn.fromDom)},at=function(n){var t=n.dom();return P.map(t.childNodes,tn.fromDom)},ct=function(n,t){var e=n.dom().childNodes;return x.from(e[t]).map(tn.fromDom)},lt=V.immutable("element","offset"),st={owner:rt,defaultView:function(n){var t=n.dom().ownerDocument.defaultView;return tn.fromDom(t)},documentElement:function(n){var t=rt(n);return tn.fromDom(t.dom().documentElement)},parent:ot,findIndex:function(e){return ot(e).bind(function(n){var t=at(n);return P.findIndex(t,function(n){return et.eq(e,n)})})},parents:function(n,t){for(var e=p.isFunction(t)?t:y.constant(!1),r=n.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=tn.fromDom(i);if(o.push(u),!0===e(u))break;r=i}return o},siblings:function(t){return ot(t).map(at).map(function(n){return P.filter(n,function(n){return!et.eq(t,n)})}).getOr([])},prevSibling:it,offsetParent:function(n){var t=n.dom();return x.from(t.offsetParent).map(tn.fromDom)},prevSiblings:function(n){return P.reverse(fn(n,it))},nextSibling:ut,nextSiblings:function(n){return fn(n,ut)},children:at,child:ct,firstChild:function(n){return ct(n,0)},lastChild:function(n){return ct(n,n.dom().childNodes.length-1)},childNodesCount:function(n){return n.dom().childNodes.length},hasChildNodes:function(n){return n.dom().hasChildNodes()},leaf:function(n,t){var e=at(n);return 0<e.length&&t<e.length?lt(e[t],0):lt(n,t)}},ft=function(n,t,e){return P.bind(st.children(n),function(n){return sn.is(n,t)?e(n)?[n]:[]:ft(n,t,e)})},dt={firstLayer:function(n,t){return ft(n,t,y.constant(!0))},filterFirstLayer:ft},mt=function(n){return n.dom().nodeName.toLowerCase()},gt=function(n){return n.dom().nodeType},ht=function(t){return function(n){return gt(n)===t}},pt=ht(on),vt=ht(un),bt=ht(rn),wt={name:mt,type:gt,value:function(n){return n.dom().nodeValue},isElement:pt,isText:vt,isDocument:bt,isComment:function(n){return gt(n)===en||"#comment"===mt(n)}},yt=function(n,t,e){if(!(p.isString(e)||p.isBoolean(e)||p.isNumber(e)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},xt=function(n,t,e){yt(n.dom(),t,e)},Ct=function(n,t){var e=n.dom().getAttribute(t);return null===e?void 0:e},Rt=function(n,t){var e=n.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},St={clone:function(n){return P.foldl(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:xt,setAll:function(n,t){var e=n.dom();q.each(t,function(n,t){yt(e,t,n)})},get:Ct,has:Rt,remove:function(n,t){n.dom().removeAttribute(t)},hasNone:function(n){var t=n.dom().attributes;return null==t||0===t.length},transfer:function(o,i,n){wt.isElement(o)&&wt.isElement(i)&&P.each(n,function(n){var t,e,r;e=i,Rt(t=o,r=n)&&!Rt(e,r)&&xt(e,r,Ct(t,r))})}},Tt=wn(function(){return Dt(tn.fromDom(document))}),Dt=function(n){var t=n.dom().body;if(null==t)throw"Body is not available yet";return tn.fromDom(t)},kt={body:Tt,getBody:Dt,inBody:function(n){var t=wt.isText(n)?n.dom().parentNode:n.dom();return null!=t&&t.ownerDocument.body.contains(t)}},At=function(n,t){var e=[];return P.each(st.children(n),function(n){t(n)&&(e=e.concat([n])),e=e.concat(At(n,t))}),e},Ot={all:function(n){return At(kt.body(),n)},ancestors:function(n,t,e){return P.filter(st.parents(n,e),t)},siblings:function(n,t){return P.filter(st.siblings(n),t)},children:function(n,t){return P.filter(st.children(n),t)},descendants:At},Nt={all:function(n){return sn.all(n)},ancestors:function(n,t,e){return Ot.ancestors(n,function(n){return sn.is(n,t)},e)},siblings:function(n,t){return Ot.siblings(n,function(n){return sn.is(n,t)})},children:function(n,t){return Ot.children(n,function(n){return sn.is(n,t)})},descendants:function(n,t){return sn.all(t,n)}};function Et(n,t,e,r,o){return n(e,r)?x.some(e):p.isFunction(o)&&o(e)?x.none():t(e,r,o)}var Pt,Bt,It,Wt,Mt,Lt=function(n,t,e){for(var r=n.dom(),o=p.isFunction(e)?e:y.constant(!1);r.parentNode;){r=r.parentNode;var i=tn.fromDom(r);if(t(i))return x.some(i);if(o(i))break}return x.none()},qt=function(n,t){return P.find(n.dom().childNodes,y.compose(t,tn.fromDom)).map(tn.fromDom)},jt=function(n,r){var o=function(n){for(var t=0;t<n.childNodes.length;t++){if(r(tn.fromDom(n.childNodes[t])))return x.some(tn.fromDom(n.childNodes[t]));var e=o(n.childNodes[t]);if(e.isSome())return e}return x.none()};return o(n.dom())},_t={first:function(n){return jt(kt.body(),n)},ancestor:Lt,closest:function(n,t,e){return Et(function(n){return t(n)},Lt,n,t,e)},sibling:function(t,e){var n=t.dom();return n.parentNode?qt(tn.fromDom(n.parentNode),function(n){return!et.eq(t,n)&&e(n)}):x.none()},child:qt,descendant:jt},zt=function(n,t,e){return _t.ancestor(n,function(n){return sn.is(n,t)},e)},Ft={first:function(n){return sn.one(n)},ancestor:zt,sibling:function(n,t){return _t.sibling(n,function(n){return sn.is(n,t)})},child:function(n,t){return _t.child(n,function(n){return sn.is(n,t)})},descendant:function(n,t){return sn.one(t,n)},closest:function(n,t,e){return Et(sn.is,zt,n,t,e)}},Ht=function(n,t,e){var r=void 0!==e?e:y.constant(!1);return r(t)?x.none():P.contains(n,wt.name(t))?x.some(t):Ft.ancestor(t,n.join(","),function(n){return sn.is(n,"table")||r(n)})},Ut=function(t,n){return st.parent(n).map(function(n){return Nt.children(n,t)})},Vt=y.curry(Ut,"th,td"),Gt=y.curry(Ut,"tr"),Xt=function(n,t){return parseInt(St.get(n,t),10)},Yt={cell:function(n,t){return Ht(["td","th"],n,t)},firstCell:function(n){return Ft.descendant(n,"th,td")},cells:function(n){return dt.firstLayer(n,"th,td")},neighbourCells:Vt,table:function(n,t){return Ft.closest(n,"table",t)},row:function(n,t){return Ht(["tr"],n,t)},rows:function(n){return dt.firstLayer(n,"tr")},notCell:function(n,t){return Ht(["caption","tr","tbody","tfoot","thead"],n,t)},neighbourRows:Gt,attr:Xt,grid:function(n,t,e){var r=Xt(n,t),o=Xt(n,e);return Z.grid(r,o)}},$t=function(n){var t=Yt.rows(n);return P.map(t,function(n){var t=n,e=st.parent(t).bind(function(n){var t=wt.name(n);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}),r=P.map(Yt.cells(n),function(n){var t=St.has(n,"rowspan")?parseInt(St.get(n,"rowspan"),10):1,e=St.has(n,"colspan")?parseInt(St.get(n,"colspan"),10):1;return Z.detail(n,t,e)});return Z.rowdata(t,r,e)})},Kt=function(n,e){return P.map(n,function(n){var t=P.map(Yt.cells(n),function(n){var t=St.has(n,"rowspan")?parseInt(St.get(n,"rowspan"),10):1,e=St.has(n,"colspan")?parseInt(St.get(n,"colspan"),10):1;return Z.detail(n,t,e)});return Z.rowdata(n,t,e.section())})},Jt=function(n,t){return n+","+t},Qt=function(n,t){var e=P.bind(n.all(),function(n){return n.cells()});return P.filter(e,t)},Zt={generate:function(n){var s={},t=[],e=n.length,f=0;P.each(n,function(n,c){var l=[];P.each(n.cells(),function(n,t){for(var e=0;void 0!==s[Jt(c,e)];)e++;for(var r=Z.extended(n.element(),n.rowspan(),n.colspan(),c,e),o=0;o<n.colspan();o++)for(var i=0;i<n.rowspan();i++){var u=e+o,a=Jt(c+i,u);s[a]=r,f=Math.max(f,u+1)}l.push(r)}),t.push(Z.rowdata(n.element(),l,n.section()))});var r=Z.grid(e,f);return{grid:y.constant(r),access:y.constant(s),all:y.constant(t)}},getAt:function(n,t,e){var r=n.access()[Jt(t,e)];return void 0!==r?x.some(r):x.none()},findItem:function(n,t,e){var r=Qt(n,function(n){return e(t,n.element())});return 0<r.length?x.some(r[0]):x.none()},filterItems:Qt,justCells:function(n){var t=P.map(n.all(),function(n){return n.cells()});return P.flatten(t)}},ne=function(n){return void 0!==n.style},te=function(n,t,e){if(!p.isString(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);ne(n)&&n.style.setProperty(t,e)},ee=function(n,t){ne(n)&&n.style.removeProperty(t)},re=function(n,t,e){var r=n.dom();te(r,t,e)},oe=function(n,t){return ne(n)?n.style.getPropertyValue(t):""},ie=function(n,t){var e=n.dom(),r=oe(e,t);return x.from(r).filter(function(n){return 0<n.length})},ue={copy:function(n,t){var e=n.dom(),r=t.dom();ne(e)&&ne(r)&&(r.style.cssText=e.style.cssText)},set:re,preserve:function(n,t){var e=St.get(n,"style"),r=t(n);return(void 0===e?St.remove:St.set)(n,"style",e),r},setAll:function(n,t){var e=n.dom();q.each(t,function(n,t){te(e,t,n)})},setOptions:function(n,t){var e=n.dom();q.each(t,function(n,t){n.fold(function(){ee(e,t)},function(n){te(e,t,n)})})},remove:function(n,t){var e=n.dom();ee(e,t),St.has(n,"style")&&""===Gn.trim(St.get(n,"style"))&&St.remove(n,"style")},get:function(n,t){var e=n.dom(),r=window.getComputedStyle(e).getPropertyValue(t),o=""!==r||kt.inBody(n)?r:oe(e,t);return null===o?void 0:o},getRaw:ie,getAllRaw:function(n){var t={},e=n.dom();if(ne(e))for(var r=0;r<e.style.length;r++){var o=e.style.item(r);t[o]=e.style[o]}return t},isValidValue:function(n,t,e){var r=tn.fromTag(n);return re(r,t,e),ie(r,t).isSome()},reflow:function(n){return n.dom().offsetWidth},transfer:function(r,o,n){wt.isElement(r)&&wt.isElement(o)&&P.each(n,function(n){var t,e;t=o,ie(r,e=n).each(function(n){ie(t,e).isNone()&&re(t,e,n)})})}},ae=function(t,e){st.parent(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})},ce=function(n,t){n.dom().appendChild(t.dom())},le={before:ae,after:function(n,t){st.nextSibling(n).fold(function(){st.parent(n).each(function(n){ce(n,t)})},function(n){ae(n,t)})},prepend:function(t,e){st.firstChild(t).fold(function(){ce(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},append:ce,appendAt:function(n,t,e){st.child(n,e).fold(function(){ce(n,t)},function(n){ae(n,t)})},wrap:function(n,t){ae(n,t),ce(t,n)}},se={before:function(t,n){P.each(n,function(n){le.before(t,n)})},after:function(r,o){P.each(o,function(n,t){var e=0===t?r:o[t-1];le.after(e,n)})},prepend:function(t,n){P.each(n.slice().reverse(),function(n){le.prepend(t,n)})},append:function(t,n){P.each(n,function(n){le.append(t,n)})}},fe=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},de={empty:function(n){n.dom().textContent="",P.each(st.children(n),function(n){fe(n)})},remove:fe,unwrap:function(n){var t=st.children(n);0<t.length&&se.before(n,t),fe(n)}},me=V.immutable("minRow","minCol","maxRow","maxCol"),ge=function(n,t){var e,i,r,u,a,c,l,o,s,f,d=function(n){return sn.is(n.element(),t)},m=$t(n),g=Zt.generate(m),h=(i=d,r=(e=g).grid().columns(),u=e.grid().rows(),a=r,l=c=0,q.each(e.access(),function(n){if(i(n)){var t=n.row(),e=t+n.rowspan()-1,r=n.column(),o=r+n.colspan()-1;t<u?u=t:c<e&&(c=e),r<a?a=r:l<o&&(l=o)}}),me(u,a,c,l)),p="th:not("+t+"),td:not("+t+")",v=dt.filterFirstLayer(n,"th,td",function(n){return sn.is(n,p)});return P.each(v,de.remove),function(n,t,e,r){for(var o,i,u,a=t.grid().columns(),c=t.grid().rows(),l=0;l<c;l++)for(var s=!1,f=0;f<a;f++)l<e.minRow()||l>e.maxRow()||f<e.minCol()||f>e.maxCol()||(Zt.getAt(t,l,f).filter(r).isNone()?(o=s,i=n[l].element(),u=tn.fromTag("td"),le.append(u,tn.fromTag("br")),(o?le.append:le.prepend)(i,u)):s=!0)}(m,g,h,d),o=n,s=h,f=P.filter(dt.firstLayer(o,"tr"),function(n){return 0===n.dom().childElementCount}),P.each(f,de.remove),s.minCol()!==s.maxCol()&&s.minRow()!==s.maxRow()||P.each(dt.firstLayer(o,"th,td"),function(n){St.remove(n,"rowspan"),St.remove(n,"colspan")}),St.remove(o,"width"),St.remove(o,"height"),ue.remove(o,"width"),ue.remove(o,"height"),n},he=function(n,t){return tn.fromDom(n.dom().cloneNode(t))},pe=function(n){return he(n,!0)},ve=function(n,t){var e=tn.fromTag(t),r=St.clone(n);return St.setAll(e,r),e},be=function(n){return he(n,!1)},we=pe,ye=function(n,t){var e=ve(n,t),r=st.children(pe(n));return se.append(e,r),e},xe=(Pt=wt.isText,Bt="text",It=function(n){return Pt(n)?x.from(n.dom().nodeValue):x.none()},Wt=Zn.detect().browser,{get:function(n){if(!Pt(n))throw new Error("Can only get "+Bt+" value of a "+Bt+" node");return Mt(n).getOr("")},getOption:Mt=Wt.isIE()&&10===Wt.version.major?function(n){try{return It(n)}catch(n){return x.none()}}:It,set:function(n,t){if(!Pt(n))throw new Error("Can only set raw "+Bt+" value of a "+Bt+" node");n.dom().nodeValue=t}}),Ce={get:function(n){return xe.get(n)},getOption:function(n){return xe.getOption(n)},set:function(n,t){xe.set(n,t)}},Re=function(n){return"img"===wt.name(n)?1:Ce.getOption(n).fold(function(){return st.children(n).length},function(n){return n.length})},Se=["img","br"],Te=Re,De=function(n){return Ce.getOption(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("Â ")}).isSome()||P.contains(Se,wt.name(n))},ke=function(n,i){var u=function(n){for(var t=st.children(n),e=t.length-1;0<=e;e--){var r=t[e];if(i(r))return x.some(r);var o=u(r);if(o.isSome())return o}return x.none()};return u(n)},Ae={first:function(n){return _t.descendant(n,De)},last:function(n){return ke(n,De)}},Oe=function(){var n=tn.fromTag("td");return le.append(n,tn.fromTag("br")),n},Ne=function(n,t,e){var r=ye(n,t);return q.each(e,function(n,t){null===n?St.remove(r,t):St.set(r,t,n)}),r},Ee=function(n){return n},Pe=function(n){return function(){return tn.fromTag("tr",n.dom())}},Be=function(c,n,l){return{row:Pe(n),cell:function(n){var r,o,i,t=st.owner(n.element()),e=tn.fromTag(wt.name(n.element()),t.dom()),u=l.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=0<u.length?(r=n.element(),o=e,i=u,Ae.first(r).map(function(n){var t=i.join(","),e=Nt.ancestors(n,t,function(n){return et.eq(n,r)});return P.foldr(e,function(n,t){var e=be(t);return le.append(n,e),e},o)}).getOr(o)):e;return le.append(a,tn.fromTag("br")),ue.copy(n.element(),e),ue.remove(e,"height"),1!==n.colspan()&&ue.remove(n.element(),"width"),c(n.element(),e),e},replace:Ne,gap:Oe}},Ie=function(n){return{row:Pe(n),cell:Oe,replace:Ee,gap:Oe}},We=function(n,t){var e=(t||document).createElement("div");return e.innerHTML=n,st.children(tn.fromDom(e))},Me=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Le(){return{up:y.constant({selector:Ft.ancestor,closest:Ft.closest,predicate:_t.ancestor,all:st.parents}),down:y.constant({selector:Nt.descendants,predicate:Ot.descendants}),styles:y.constant({get:ue.get,getRaw:ue.getRaw,set:ue.set,remove:ue.remove}),attrs:y.constant({get:St.get,set:St.set,remove:St.remove,copyTo:function(n,t){var e=St.clone(n);St.setAll(t,e)}}),insert:y.constant({before:le.before,after:le.after,afterAll:se.after,append:le.append,appendAll:se.append,prepend:le.prepend,wrap:le.wrap}),remove:y.constant({unwrap:de.unwrap,remove:de.remove}),create:y.constant({nu:tn.fromTag,clone:function(n){return tn.fromDom(n.dom().cloneNode(!1))},text:tn.fromText}),query:y.constant({comparePosition:function(n,t){return n.dom().compareDocumentPosition(t.dom())},prevSibling:st.prevSibling,nextSibling:st.nextSibling}),property:y.constant({children:st.children,name:wt.name,parent:st.parent,isText:wt.isText,isComment:wt.isComment,isElement:wt.isElement,getText:Ce.get,setText:Ce.set,isBoundary:function(n){return!!wt.isElement(n)&&("body"===wt.name(n)||P.contains(Me,wt.name(n)))},isEmptyTag:function(n){return!!wt.isElement(n)&&P.contains(["br","img","hr","input"],wt.name(n))}}),eq:et.eq,is:et.is}}var qe=V.immutable("left","right"),je=function(n,t,e){var r=n.property().children(t);return P.findIndex(r,y.curry(n.eq,e)).map(function(n){return{before:y.constant(r.slice(0,n)),after:y.constant(r.slice(n+1))}})},_e=function(e,r,o){return je(e,r,o).map(function(n){var t=e.create().clone(r);return e.insert().appendAll(t,n.before().concat([o])),e.insert().appendAll(r,n.after()),e.insert().before(r,t),qe(t,r)})},ze=function(e,r,n){return je(e,r,n).map(function(n){var t=e.create().clone(r);return e.insert().appendAll(t,n.after()),e.insert().after(r,t),qe(r,t)})},Fe=function(i,n,u,a){var r=V.immutable("first","second","splits"),c=function(n,t,o){var e=r(n,x.none(),o);return u(n)?r(n,t,o):i.property().parent(n).bind(function(r){return a(i,r,n).map(function(n){var t=[{first:n.left,second:n.right}],e=u(r)?r:n.left();return c(e,x.some(n.right()),o.concat(t))}).getOr(e)})};return c(n,x.none(),[])},He=function(r,o,n,t){var e=o(r,n);return P.foldr(t,function(n,t){var e=o(r,t);return Ue(r,n,e)},e)},Ue=function(t,n,e){return n.bind(function(n){return e.filter(y.curry(t.eq,n))})},Ve=function(n,t,e){return 0<e.length?He(n,t,(r=e)[0],r.slice(1)):x.none();var r},Ge=function(n,t){return y.curry(n.eq,t)},Xe=function(t,n,e,r){var o=void 0!==r?r:y.constant(!1),i=[n].concat(t.up().all(n)),u=[e].concat(t.up().all(e)),a=function(t){return P.findIndex(t,o).fold(function(){return t},function(n){return t.slice(0,n+1)})},c=a(i),l=a(u),s=P.find(c,function(n){return P.exists(l,Ge(t,n))});return{firstpath:y.constant(c),secondpath:y.constant(l),shared:y.constant(s)}},Ye=function(t,n,e){var r=Xe(t,n,e);return r.shared().bind(function(n){return function(o,i,n,t){var u=o.property().children(i);if(o.eq(i,n[0]))return x.some([n[0]]);if(o.eq(i,t[0]))return x.some([t[0]]);var e=function(n){var t=P.reverse(n),e=P.findIndex(t,Ge(o,i)).getOr(-1),r=e<t.length-1?t[e+1]:t[e];return P.findIndex(u,Ge(o,r))},r=e(n),a=e(t);return r.bind(function(r){return a.map(function(n){var t=Math.min(r,n),e=Math.max(r,n);return u.slice(t,e+1)})})}(t,n,r.firstpath(),r.secondpath())})},$e=Xe,Ke=function(n,t,e){return Ve(n,t,e)},Je=function(n,t,e){return Ye(n,t,e)},Qe=function(n,t,e,r){return $e(n,t,e,r)},Ze=function(n,t,e){return _e(n,t,e)},nr=function(n,t,e){return ze(n,t,e)},tr=function(n,t,e,r){return Fe(n,t,e,r)},er=Le(),rr={sharedOne:function(e,n){return Ke(er,function(n,t){return e(t)},n)},subset:function(n,t){return Je(er,n,t)},ancestors:function(n,t,e){return Qe(er,n,t,e)},breakToLeft:function(n,t){return Ze(er,n,t)},breakToRight:function(n,t){return nr(er,n,t)},breakPath:function(n,t,r){return tr(er,n,t,function(n,t,e){return r(t,e)})}},or=function(n,t){return t.column()>=n.startCol()&&t.column()+t.colspan()-1<=n.finishCol()&&t.row()>=n.startRow()&&t.row()+t.rowspan()-1<=n.finishRow()},ir=function(n,t){var e=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return e<=n.finishCol()&&r>=n.startCol()&&o<=n.finishRow()&&i>=n.startRow()},ur=function(n,t){for(var e=!0,r=y.curry(or,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)e=e&&Zt.getAt(n,o,i).exists(r);return e?x.some(t):x.none()},ar=function(n,t,e){var r=Zt.findItem(n,t,et.eq),o=Zt.findItem(n,e,et.eq);return r.bind(function(r){return o.map(function(n){return t=r,e=n,Z.bounds(Math.min(t.row(),e.row()),Math.min(t.column(),e.column()),Math.max(t.row()+t.rowspan()-1,e.row()+e.rowspan()-1),Math.max(t.column()+t.colspan()-1,e.column()+e.colspan()-1));var t,e})})},cr=ar,lr=function(t,n,e){return ar(t,n,e).bind(function(n){return ur(t,n)})},sr=function(r,n,o,i){return Zt.findItem(r,n,et.eq).bind(function(n){var t=0<o?n.row()+n.rowspan()-1:n.row(),e=0<i?n.column()+n.colspan()-1:n.column();return Zt.getAt(r,t+o,e+i).map(function(n){return n.element()})})},fr=function(e,n,t){return cr(e,n,t).map(function(n){var t=Zt.filterItems(e,y.curry(ir,n));return P.map(t,function(n){return n.element()})})},dr=function(n,t){return Zt.findItem(n,t,function(n,t){return et.contains(t,n)}).bind(function(n){return n.element()})},mr=function(n){var t=$t(n);return Zt.generate(t)},gr=function(e,r,o){return Yt.table(e).bind(function(n){var t=mr(n);return sr(t,e,r,o)})},hr=function(n,t,e){var r=mr(n);return fr(r,t,e)},pr=function(n,t,e,r,o){var i=mr(n),u=et.eq(n,e)?t:dr(i,t),a=et.eq(n,o)?r:dr(i,r);return fr(i,u,a)},vr=function(n,t,e){var r=mr(n);return lr(r,t,e)},br=function(n,t){return Ft.ancestor(n,"table")},wr=V.immutableBag(["boxes","start","finish"],[]),yr=function(a,c,r){var l=function(t){return function(n){return r(n)||et.eq(n,t)}};return et.eq(a,c)?x.some(wr({boxes:x.some([a]),start:a,finish:c})):br(a).bind(function(u){return br(c).bind(function(i){if(et.eq(u,i))return x.some(wr({boxes:hr(u,a,c),start:a,finish:c}));if(et.contains(u,i)){var n=0<(t=Nt.ancestors(c,"td,th",l(u))).length?t[t.length-1]:c;return x.some(wr({boxes:pr(u,a,u,c,i),start:a,finish:n}))}if(et.contains(i,u)){var t,e=0<(t=Nt.ancestors(a,"td,th",l(i))).length?t[t.length-1]:a;return x.some(wr({boxes:pr(i,a,u,c,i),start:a,finish:e}))}return rr.ancestors(a,c).shared().bind(function(n){return Ft.closest(n,"table",r).bind(function(n){var t=Nt.ancestors(c,"td,th",l(n)),e=0<t.length?t[t.length-1]:c,r=Nt.ancestors(a,"td,th",l(n)),o=0<r.length?r[r.length-1]:a;return x.some(wr({boxes:pr(n,a,u,c,i),start:o,finish:e}))})})})})},xr=yr,Cr=function(n,t){var e=Nt.descendants(n,t);return 0<e.length?x.some(e):x.none()},Rr=function(n,t,e,r,o){return(i=n,u=o,P.find(i,function(n){return sn.is(n,u)})).bind(function(n){return gr(n,t,e).bind(function(n){return t=n,e=r,Ft.ancestor(t,"table").bind(function(n){return Ft.descendant(n,e).bind(function(n){return yr(n,t).bind(function(t){return t.boxes().map(function(n){return{boxes:y.constant(n),start:y.constant(t.start()),finish:y.constant(t.finish())}})})})});var t,e})});var i,u},Sr=function(n,t,r){return Ft.descendant(n,t).bind(function(e){return Ft.descendant(n,r).bind(function(t){return rr.sharedOne(br,[e,t]).map(function(n){return{first:y.constant(e),last:y.constant(t),table:y.constant(n)}})})})},Tr=function(n,t){return Cr(n,t)},Dr=function(o,n,t){return Sr(o,n,t).bind(function(e){var n=function(n){return et.eq(o,n)},t=Ft.ancestor(e.first(),"thead,tfoot,tbody,table",n),r=Ft.ancestor(e.last(),"thead,tfoot,tbody,table",n);return t.bind(function(t){return r.bind(function(n){return et.eq(t,n)?vr(e.table(),e.first(),e.last()):x.none()})})})},kr="data-mce-selected",Ar="data-mce-first-selected",Or="data-mce-last-selected",Nr={selected:y.constant(kr),selectedSelector:y.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:y.constant("[data-mce-selected]"),firstSelected:y.constant(Ar),firstSelectedSelector:y.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:y.constant(Or),lastSelectedSelector:y.constant("td[data-mce-last-selected],th[data-mce-last-selected]")},Er=function(u){if(!p.isArray(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],e={};return P.each(u,function(n,r){var t=q.keys(n);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=n[o];if(void 0!==e[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!p.isArray(i))throw new Error("case arguments must be an array");a.push(o),e[o]=function(){var n=arguments.length;if(n!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+n);for(var e=new Array(n),t=0;t<e.length;t++)e[t]=arguments[t];return{fold:function(){if(arguments.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+arguments.length);return arguments[r].apply(null,e)},match:function(n){var t=q.keys(n);if(a.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+t.join(","));if(!P.forall(a,function(n){return P.contains(t,n)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+a.join(", "));return n[o].apply(null,e)},log:function(n){console.log(n,{constructors:a,constructor:o,params:e})}}}}),e},Pr=Er([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Br={cata:function(n,t,e,r){return n.fold(t,e,r)},none:Pr.none,multiple:Pr.multiple,single:Pr.single},Ir=function(n,t){return Br.cata(t.get(),y.constant([]),y.identity,y.constant([n]))},Wr=function(e,n){return Br.cata(n.get(),x.none,function(t,n){return 0===t.length?x.none():Dr(e,Nr.firstSelectedSelector(),Nr.lastSelectedSelector()).bind(function(n){return 1<t.length?x.some({bounds:y.constant(n),cells:y.constant(t)}):x.none()})},x.none)},Mr=function(n,t){var e=Ir(n,t);return 0<e.length&&P.forall(e,function(n){return St.has(n,"rowspan")&&1<parseInt(St.get(n,"rowspan"),10)||St.has(n,"colspan")&&1<parseInt(St.get(n,"colspan"),10)})?x.some(e):x.none()},Lr=Ir,qr=function(n){return{element:y.constant(n),mergable:x.none,unmergable:x.none,selection:y.constant([n])}},jr=V.immutable("element","clipboard","generators"),_r={noMenu:qr,forMenu:function(n,t,e){return{element:y.constant(e),mergable:y.constant(Wr(t,n)),unmergable:y.constant(Mr(e,n)),selection:y.constant(Lr(e,n))}},notCell:function(n){return qr(n)},paste:jr,pasteRows:function(n,t,e,r,o){return{element:y.constant(e),mergable:x.none,unmergable:x.none,selection:y.constant(Lr(e,n)),clipboard:y.constant(r),generators:y.constant(o)}}},zr=function(a,n,c,l){a.on("BeforeGetContent",function(e){!0===e.selection&&Br.cata(n.get(),y.noop,function(n){var t;e.preventDefault(),(t=n,Yt.table(t[0]).map(we).map(function(n){return[ge(n,Nr.attributeSelector())]})).each(function(n){e.content=P.map(n,function(n){return t=n,a.selection.serializer.serialize(t.dom(),{});var t}).join("")})},y.noop)}),a.on("BeforeSetContent",function(u){!0===u.selection&&!0===u.paste&&x.from(a.dom.getParent(a.selection.getStart(),"th,td")).each(function(n){var i=tn.fromDom(n);Yt.table(i).bind(function(t){var n=P.filter(We(u.content),function(n){return"meta"!==wt.name(n)});if(1===n.length&&"table"===wt.name(n[0])){u.preventDefault();var e=tn.fromDom(a.getDoc()),r=Ie(e),o=_r.paste(i,n[0],r);c.pasteCells(t,o).each(function(n){a.selection.setRng(n),a.focus(),l.clear(t)})}})})})};function Fr(r,o){var n=function(n){var t=o(n);if(t<=0||null===t){var e=ue.get(n,r);return parseFloat(e)||0}return t},i=function(o,n){return P.foldl(n,function(n,t){var e=ue.get(o,t),r=void 0===e?0:parseInt(e,10);return isNaN(r)?n:n+r},0)};return{set:function(n,t){if(!p.isNumber(t)&&!t.match(/^[0-9]+$/))throw r+".set accepts only positive integer values. Value was "+t;var e=n.dom();ne(e)&&(e.style[r]=t+"px")},get:n,getOuter:n,aggregate:i,max:function(n,t,e){var r=i(n,e);return r<t?t-r:0}}}var Hr=Fr("height",function(n){return kt.inBody(n)?n.dom().getBoundingClientRect().height:n.dom().offsetHeight}),Ur=function(n){return Hr.get(n)},Vr=function(n){return Hr.getOuter(n)},Gr=Fr("width",function(n){return n.dom().offsetWidth}),Xr=function(n){return Gr.get(n)},Yr=function(n){return Gr.getOuter(n)},$r=Zn.detect(),Kr=function(n,t,e){return r=ue.get(n,t),o=e,i=parseFloat(r),isNaN(i)?o:i;var r,o,i},Jr=function(n){return $r.browser.isIE()||$r.browser.isEdge()?(e=Kr(t=n,"padding-top",0),r=Kr(t,"padding-bottom",0),o=Kr(t,"border-top-width",0),i=Kr(t,"border-bottom-width",0),u=t.dom().getBoundingClientRect().height,"border-box"===ue.get(t,"box-sizing")?u:u-e-r-(o+i)):Kr(n,"height",Ur(n));var t,e,r,o,i,u},Qr=/(\d+(\.\d+)?)(\w|%)*/,Zr=/(\d+(\.\d+)?)%/,no=/(\d+(\.\d+)?)px|em/,to=function(n,t){ue.set(n,"height",t+"px")},eo=function(n,t,e,r){var o,i,u,a,c,l=parseInt(n,10);return Gn.endsWith(n,"%")&&"table"!==wt.name(t)?(o=t,i=l,u=e,a=r,c=Yt.table(o).map(function(n){var t=u(n);return Math.floor(i/100*t)}).getOr(i),a(o,c),c):l},ro=function(n){var t,e=(t=n,ue.getRaw(t,"height").getOrThunk(function(){return Jr(t)+"px"}));return e?eo(e,n,Ur,to):Ur(n)},oo=function(n,t){return St.has(n,t)?parseInt(St.get(n,t),10):1},io=function(n){return ue.getRaw(n,"width").fold(function(){return x.from(St.get(n,"width"))},function(n){return x.some(n)})},uo=function(n,t){return n/t.pixelWidth()*100},ao={percentageBasedSizeRegex:y.constant(Zr),pixelBasedSizeRegex:y.constant(no),setPixelWidth:function(n,t){ue.set(n,"width",t+"px")},setPercentageWidth:function(n,t){ue.set(n,"width",t+"%")},setHeight:to,getPixelWidth:function(t,e){return io(t).fold(function(){var n=Xr(t);return parseInt(n,10)},function(n){return function(n,t,e){if(no.test(t)){var r=no.exec(t);return parseInt(r[1],10)}if(Zr.test(t)){var o=Zr.exec(t),i=parseFloat(o[1]);return i/100*e.pixelWidth()}var u=Xr(n);return parseInt(u,10)}(t,n,e)})},getPercentageWidth:function(e,r){return io(e).fold(function(){var n=Xr(e),t=parseInt(n,10);return uo(t,r)},function(n){return function(n,t,e){if(Zr.test(t)){var r=Zr.exec(t);return parseFloat(r[1])}var o=Xr(n),i=parseInt(o,10);return uo(i,e)}(e,n,r)})},getGenericWidth:function(n){return io(n).bind(function(n){if(Qr.test(n)){var t=Qr.exec(n);return x.some({width:y.constant(t[1]),unit:y.constant(t[3])})}return x.none()})},setGenericWidth:function(n,t,e){ue.set(n,"width",t+e)},getHeight:function(n){return e="rowspan",ro(t=n)/oo(t,e);var t,e},getRawWidth:io},co=function(e,r){ao.getGenericWidth(e).each(function(n){var t=n.width()/2;ao.setGenericWidth(e,t,n.unit()),ao.setGenericWidth(r,t,n.unit())})},lo=function(n,t){var e=t||tn.fromDom(document.documentElement);return _t.ancestor(n,y.curry(et.eq,e)).isSome()},so=function(n){var t=n.dom();return t===t.window?n:wt.isDocument(n)?t.defaultView||t.parentWindow:null},fo=function(e,r){return{left:y.constant(e),top:y.constant(r),translate:function(n,t){return fo(e+n,r+t)}}},mo=function(n,t){return void 0!==n?n:void 0!==t?t:0},go=function(n){var t,e=n.dom(),r=e.ownerDocument,o=r.body,i=tn.fromDom(r.documentElement);return o===e?fo(o.offsetLeft,o.offsetTop):lo(n,i)?(t=e.getBoundingClientRect(),fo(t.left,t.top)):fo(0,0)},ho=function(n){var t=n.dom().ownerDocument,e=t.body,r=so(tn.fromDom(t)),o=t.documentElement,i=mo(r.pageYOffset,o.scrollTop),u=mo(r.pageXOffset,o.scrollLeft),a=mo(o.clientTop,e.clientTop),c=mo(o.clientLeft,e.clientLeft);return go(n).translate(u-c,i-a)},po=V.immutable("row","y"),vo=V.immutable("col","x"),bo=function(n){return ho(n).left()+Yr(n)},wo=function(n){return ho(n).left()},yo=function(n,t){return vo(n,wo(t))},xo=function(n,t){return vo(n,bo(t))},Co=function(n){return ho(n).top()},Ro=function(e,t,r){if(0===r.length)return[];var n=P.map(r.slice(1),function(n,t){return n.map(function(n){return e(t,n)})}),o=r[r.length-1].map(function(n){return t(r.length-1,n)});return n.concat([o])},So={delta:y.identity,positions:y.curry(Ro,function(n,t){return po(n,Co(t))},function(n,t){return po(n,Co(t)+Vr(t))}),edge:Co},To={delta:y.identity,edge:wo,positions:y.curry(Ro,yo,xo)},Do={height:So,rtl:{delta:function(n,t){return-n},edge:bo,positions:y.curry(Ro,xo,yo)},ltr:To},ko={ltr:Do.ltr,rtl:Do.rtl};function Ao(t){var e=function(n){return t(n).isRtl()?ko.rtl:ko.ltr};return{delta:function(n,t){return e(t).delta(n,t)},edge:function(n){return e(n).edge(n)},positions:function(n,t){return e(t).positions(n,t)}}}var Oo=function(n){var t=$t(n);return Zt.generate(t).grid()},No=function(n){var t=n,e=function(){return t};return{get:e,set:function(n){t=n},clone:function(){return No(e())}}},Eo=function(n,t){return Po(n,t,{validate:p.isFunction,label:"function"})},Po=function(r,o,i){if(0===o.length)throw new Error("You must specify at least one required field.");return F("required",o),U(o),function(t){var e=q.keys(t);P.forall(o,function(n){return P.contains(e,n)})||_(o,e),r(o,e);var n=P.filter(o,function(n){return!i.validate(t[n],n)});return 0<n.length&&H(n,i.label),t}},Bo=y.noop,Io={exactly:y.curry(Eo,function(t,n){var e=P.filter(n,function(n){return!P.contains(t,n)});0<e.length&&z(e)}),ensure:y.curry(Eo,Bo),ensureWith:y.curry(Po,Bo)},Wo=function(n){var t=St.has(n,"colspan")?parseInt(St.get(n,"colspan"),10):1,e=St.has(n,"rowspan")?parseInt(St.get(n,"rowspan"),10):1;return{element:y.constant(n),colspan:y.constant(t),rowspan:y.constant(e)}},Mo=Io.exactly(["cell","row","replace","gap"]),Lo=function(r,n){Mo(r);var e=No(x.none()),o=void 0!==n?n:Wo,i=function(n){var t,e=o(n);return t=e,r.cell(t)},u=function(n){var t=i(n);return e.get().isNone()&&e.set(x.some(t)),a=x.some({item:n,replacement:t}),t},a=x.none();return{getOrInit:function(t,e){return a.fold(function(){return u(t)},function(n){return e(t,n.item)?n.replacement:u(t)})},cursor:e.get}},qo=function(o,a){return function(e){var r=No(x.none());Mo(e);var i=[],u=function(n){var t=e.replace(n,a,{scope:o});return i.push({item:n,sub:t}),r.get().isNone()&&r.set(x.some(t)),t};return{replaceOrInit:function(t,e){return(r=t,o=e,P.find(i,function(n){return o(n.item,r)})).fold(function(){return u(t)},function(n){return e(t,n.item)?n.sub:u(t)});var r,o},cursor:r.get}}},jo=function(e){Mo(e);var n=No(x.none());return{combine:function(t){return n.get().isNone()&&n.set(x.some(t)),function(){var n=e.cell({element:y.constant(t),colspan:y.constant(1),rowspan:y.constant(1)});return ue.remove(n,"width"),ue.remove(t,"width"),n}},cursor:n.get}},_o=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zo=function(n,t){var e=n.property().name(t);return P.contains(_o,e)},Fo=function(n,t){return P.contains(["br","img","hr","input"],n.property().name(t))},Ho=zo,Uo=function(n,t){var e=n.property().name(t);return P.contains(["ol","ul"],e)},Vo=Fo,Go=Le(),Xo=function(n){return Ho(Go,n)},Yo=function(n){return Uo(Go,n)},$o=function(n){return Vo(Go,n)},Ko=function(n){var t,i=function(n){return"br"===wt.name(n)},r=function(o){return Ae.last(o).bind(function(e){var n,r=(n=e,st.nextSibling(n).map(function(n){return!!Xo(n)||($o(n)?"img"!==wt.name(n):void 0)}).getOr(!1));return st.parent(e).map(function(n){return!0===r||(t=n,"li"===wt.name(t)||_t.ancestor(t,Yo).isSome())||i(e)||Xo(n)&&!et.eq(o,n)?[]:[tn.fromTag("br")];var t})}).getOr([])},e=0===(t=P.bind(n,function(n){var t,e=st.children(n);return t=e,P.forall(t,function(n){return i(n)||wt.isText(n)&&0===Ce.get(n).trim().length})?[]:e.concat(r(n))})).length?[tn.fromTag("br")]:t;de.empty(n[0]),se.append(n[0],e)},Jo=function(u){return function(){for(var n=new Array(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(var e={},r=0;r<n.length;r++){var o=n[r];for(var i in o)o.hasOwnProperty(i)&&(e[i]=u(e[i],o[i]))}return e}},Qo=Jo(function(n,t){return p.isObject(n)&&p.isObject(t)?Qo(n,t):t}),Zo=Jo(function(n,t){return t}),ni={deepMerge:Qo,merge:Zo},ti=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},ei=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return x.none()},ri=function(n,t){return Z.rowcells(t,n.section())},oi=function(n,t){return n.cells()[t]},ii={addCell:function(n,t,e){var r=n.cells(),o=r.slice(0,t),i=r.slice(t),u=o.concat([e]).concat(i);return ri(n,u)},setCells:ri,mutateCell:function(n,t,e){n.cells()[t]=e},getCell:oi,getCellElement:function(n,t){return oi(n,t).element()},mapCells:function(n,t){var e=n.cells(),r=P.map(e,t);return Z.rowcells(r,n.section())},cellLength:function(n){return n.cells().length}},ui=function(n,t){if(0===n.length)return 0;var e=n[0];return P.findIndex(n,function(n){return!t(e.element(),n.element())}).fold(function(){return n.length},function(n){return n})},ai=function(n,t,e,r){var o,i,u,a,c=(o=n,i=t,o[i]).cells().slice(e),l=ui(c,r),s=(u=n,a=e,P.map(u,function(n){return ii.getCell(n,a)})).slice(t),f=ui(s,r);return{colspan:y.constant(l),rowspan:y.constant(f)}},ci=function(o,i){var u=P.map(o,function(n,t){return P.map(n.cells(),function(n,t){return!1})});return P.map(o,function(n,r){var t=P.bind(n.cells(),function(n,t){if(!1===u[r][t]){var e=ai(o,r,t,i);return function(n,t,e,r){for(var o=n;o<n+e;o++)for(var i=t;i<t+r;i++)u[o][i]=!0}(r,t,e.rowspan(),e.colspan()),[Z.detailnew(n.element(),e.rowspan(),e.colspan(),n.isNew())]}return[]});return Z.rowdetails(t,n.section())})},li=function(n,t,e){for(var r=[],o=0;o<n.grid().rows();o++){for(var i=[],u=0;u<n.grid().columns();u++){var a=Zt.getAt(n,o,u).map(function(n){return Z.elementnew(n.element(),e)}).getOrThunk(function(){return Z.elementnew(t.gap(),!0)});i.push(a)}var c=Z.rowcells(i,n.all()[o].section());r.push(c)}return r},si=function(n,t,e,r){e===r?St.remove(n,t):St.set(n,t,e)},fi=function(o,n){var i=[],u=[],t=function(n,t){var e;0<n.length?function(n,t){var e=Ft.child(o,t).getOrThunk(function(){var n=tn.fromTag(t,st.owner(o).dom());return le.append(o,n),n});de.empty(e);var r=P.map(n,function(n){n.isNew()&&i.push(n.element());var t=n.element();return de.empty(t),P.each(n.cells(),function(n){n.isNew()&&u.push(n.element()),si(n.element(),"colspan",n.colspan(),1),si(n.element(),"rowspan",n.rowspan(),1),le.append(t,n.element())}),t});se.append(e,r)}(n,t):(e=t,Ft.child(o,e).bind(de.remove))},e=[],r=[],a=[];return P.each(n,function(n){switch(n.section()){case"thead":e.push(n);break;case"tbody":r.push(n);break;case"tfoot":a.push(n)}}),t(e,"thead"),t(r,"tbody"),t(a,"tfoot"),{newRows:y.constant(i),newCells:y.constant(u)}},di=function(n){return P.map(n,function(n){var e=be(n.element());return P.each(n.cells(),function(n){var t=we(n.element());si(t,"colspan",n.colspan(),1),si(t,"rowspan",n.rowspan(),1),le.append(e,t)}),e})},mi=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},gi=function(n,t){for(var e=[],r=n;r<t;r++)e.push(r);return e},hi=function(t,e){if(e<0||e>=t.length-1)return x.none();var n=t[e].fold(function(){var n=P.reverse(t.slice(0,e));return ei(n,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return x.some({value:n,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return ei(n,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return x.some({value:n,delta:1})});return n.bind(function(e){return r.map(function(n){var t=n.delta+e.delta;return Math.abs(n.value-e.value)/t})})},pi=function(n,t,e){var r=n();return P.find(r,t).orThunk(function(){return x.from(r[0]).orThunk(e)}).map(function(n){return n.element()})},vi=function(e){var n=e.grid(),t=gi(0,n.columns()),r=gi(0,n.rows());return P.map(t,function(t){return pi(function(){return P.bind(r,function(n){return Zt.getAt(e,n,t).filter(function(n){return n.column()===t}).fold(y.constant([]),function(n){return[n]})})},function(n){return 1===n.colspan()},function(){return Zt.getAt(e,0,t)})})},bi=function(e){var n=e.grid(),t=gi(0,n.rows()),r=gi(0,n.columns());return P.map(t,function(t){return pi(function(){return P.bind(r,function(n){return Zt.getAt(e,t,n).filter(function(n){return n.row()===t}).fold(y.constant([]),function(n){return[n]})})},function(n){return 1===n.rowspan()},function(){return Zt.getAt(e,t,0)})})},wi=function(n,t,e,r,o){var i=tn.fromTag("div");return ue.setAll(i,{position:"absolute",left:t-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),St.setAll(i,{"data-column":n,role:"presentation"}),i},yi=function(n,t,e,r,o){var i=tn.fromTag("div");return ue.setAll(i,{position:"absolute",left:t+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),St.setAll(i,{"data-row":n,role:"presentation"}),i},xi=function(n){var t=n.replace(/\./g,"-");return{resolve:function(n){return t+"-"+n}}},Ci={resolve:xi("ephox-snooker").resolve},Ri=function(n,t){var e=St.get(n,t);return void 0===e||""===e?[]:e.split(" ")},Si=Ri,Ti=function(n,t,e){var r=Ri(n,t).concat([e]);St.set(n,t,r.join(" "))},Di=function(n,t,e){var r=P.filter(Ri(n,t),function(n){return n!==e});0<r.length?St.set(n,t,r.join(" ")):St.remove(n,t)},ki=function(n){return Si(n,"class")},Ai=function(n,t){return Ti(n,"class",t)},Oi=function(n,t){return Di(n,"class",t)},Ni=ki,Ei=Ai,Pi=Oi,Bi=function(n,t){P.contains(ki(n),t)?Oi(n,t):Ai(n,t)},Ii=function(n){return void 0!==n.dom().classList},Wi=function(n,t){return Ii(n)&&n.dom().classList.contains(t)},Mi={add:function(n,t){Ii(n)?n.dom().classList.add(t):Ei(n,t)},remove:function(n,t){var e;Ii(n)?n.dom().classList.remove(t):Pi(n,t),0===(Ii(e=n)?e.dom().classList:Ni(e)).length&&St.remove(e,"class")},toggle:function(n,t){return Ii(n)?n.dom().classList.toggle(t):Bi(n,t)},toggler:function(n,t){var e,r,o,i,u,a,c=Ii(n),l=n.dom().classList;return e=function(){c?l.remove(t):Pi(n,t)},r=function(){c?l.add(t):Ei(n,t)},o=Wi(n,t),i=o||!1,{on:u=function(){r(),i=!0},off:a=function(){e(),i=!1},toggle:function(){(i?a:u)()},isOn:function(){return i}}},has:Wi},Li=Ci.resolve("resizer-bar"),qi=Ci.resolve("resizer-rows"),ji=Ci.resolve("resizer-cols"),_i=function(n){var t=Nt.descendants(n.parent(),"."+Li);P.each(t,de.remove)},zi=function(e,n,r){var o=e.origin();P.each(n,function(n,t){n.each(function(n){var t=r(o,n);Mi.add(t,Li),le.append(e.parent(),t)})})},Fi=function(n,t,e,r,o,i){var u,a,c,l,s=ho(t),f=0<e.length?o.positions(e,t):[];u=n,a=f,c=s,l=Yr(t),zi(u,a,function(n,t){var e=yi(t.row(),c.left()-n.left(),t.y()-n.top(),l,7);return Mi.add(e,qi),e});var d,m,g,h,p=0<r.length?i.positions(r,t):[];d=n,m=p,g=s,h=Vr(t),zi(d,m,function(n,t){var e=wi(t.col(),t.x()-n.left(),g.top()-n.top(),7,h);return Mi.add(e,ji),e})},Hi=function(n,t){var e=Nt.descendants(n.parent(),"."+Li);P.each(e,t)},Ui={refresh:function(n,t,e,r){_i(n);var o=$t(t),i=Zt.generate(o),u=bi(i),a=vi(i);Fi(n,t,u,a,e,r)},hide:function(n){Hi(n,function(n){ue.set(n,"display","none")})},show:function(n){Hi(n,function(n){ue.set(n,"display","block")})},destroy:_i,isRowBar:function(n){return Mi.has(n,qi)},isColBar:function(n){return Mi.has(n,ji)}},Vi=function(n,r){return P.map(n,function(n){var t,e=(t=n.details(),ei(t,function(n){return st.parent(n.element()).map(function(n){var t=st.parent(n).isNone();return Z.elementnew(n,t)})}).getOrThunk(function(){return Z.elementnew(r.row(),!0)}));return Z.rowdatanew(e.element(),n.details(),n.section(),e.isNew())})},Gi=function(n,t){var e=ci(n,et.eq);return Vi(e,t)},Xi=function(n,t){var e=P.flatten(P.map(n.all(),function(n){return n.cells()}));return P.find(e,function(n){return et.eq(t,n.element())})},Yi=function(a,c,l,s,f){return function(e,r,n,o,i){var t=$t(r),u=Zt.generate(t);return c(u,n).map(function(n){var t=li(u,o,!1),e=a(t,n,et.eq,f(o)),r=Gi(e.grid(),o);return{grid:y.constant(r),cursor:e.cursor}}).fold(function(){return x.none()},function(n){var t=fi(r,n.grid());return l(r,n.grid(),i),s(r),Ui.refresh(e,r,Do.height,i),x.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})})}},$i=Gi,Ki=function(t,n){return Yt.cell(n.element()).bind(function(n){return Xi(t,n)})},Ji=function(t,n){var e=P.map(n.selection(),function(n){return Yt.cell(n).bind(function(n){return Xi(t,n)})}),r=ti(e);return 0<r.length?x.some(r):x.none()},Qi=function(t,e){return Yt.cell(e.element()).bind(function(n){return Xi(t,n).map(function(n){return ni.merge(n,{generators:e.generators,clipboard:e.clipboard})})})},Zi=function(t,n){var e=P.map(n.selection(),function(n){return Yt.cell(n).bind(function(n){return Xi(t,n)})}),r=ti(e);return 0<r.length?x.some(ni.merge({cells:r},{generators:n.generators,clipboard:n.clipboard})):x.none()},nu=function(n,t){return t.mergable()},tu=function(n,t){return t.unmergable()},eu=function(e){return{is:function(n){return e===n},isValue:y.always,isError:y.never,getOr:y.constant(e),getOrThunk:y.constant(e),getOrDie:y.constant(e),or:function(n){return eu(e)},orThunk:function(n){return eu(e)},fold:function(n,t){return t(e)},map:function(n){return eu(n(e))},each:function(n){n(e)},bind:function(n){return n(e)},exists:function(n){return n(e)},forall:function(n){return n(e)},toOption:function(){return x.some(e)}}},ru=function(e){return{is:y.never,isValue:y.never,isError:y.always,getOr:y.identity,getOrThunk:function(n){return n()},getOrDie:function(){return y.die(String(e))()},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,t){return n(e)},map:function(n){return ru(e)},each:y.noop,bind:function(n){return ru(e)},exists:y.never,forall:y.always,toOption:x.none}},ou={value:eu,error:ru},iu=function(n,t){return P.map(n,function(){return Z.elementnew(t.cell(),!0)})},uu=function(t,n,e){return t.concat(mi(n,function(n){return ii.setCells(t[t.length-1],iu(t[t.length-1].cells(),e))}))},au=function(n,t,e){return P.map(n,function(n){return ii.setCells(n,n.cells().concat(iu(gi(0,t),e)))})},cu=function(n,t,e){if(n.row()>=t.length||n.column()>ii.cellLength(t[0]))return ou.error("invalid start address out of table bounds, row: "+n.row()+", column: "+n.column());var r=t.slice(n.row()),o=r[0].cells().slice(n.column()),i=ii.cellLength(e[0]),u=e.length;return ou.value({rowDelta:y.constant(r.length-u),colDelta:y.constant(o.length-i)})},lu=function(n,t){var e=ii.cellLength(n[0]),r=ii.cellLength(t[0]);return{rowDelta:y.constant(0),colDelta:y.constant(e-r)}},su=function(n,t,e){var r=t.colDelta()<0?au:y.identity;return(t.rowDelta()<0?uu:y.identity)(r(n,Math.abs(t.colDelta()),e),Math.abs(t.rowDelta()),e)},fu=function(n,t,e,r){if(0===n.length)return n;for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)ii.mutateCell(n[o],i,Z.elementnew(r(),!1));return n},du=function(n,t,e,r){for(var o=!0,i=0;i<n.length;i++)for(var u=0;u<ii.cellLength(n[0]);u++){var a=e(ii.getCellElement(n[i],u),t);!0===a&&!1===o?ii.mutateCell(n[i],u,Z.elementnew(r(),!0)):!0===a&&(o=!1)}return n},mu=function(i,u,a,c){if(0<u&&u<i.length){var n=i[u-1].cells(),t=(e=n,r=a,P.foldl(e,function(n,t){return P.exists(n,function(n){return r(n.element(),t.element())})?n:n.concat([t])},[]));P.each(t,function(n){for(var t=x.none(),e=u;e<i.length;e++)for(var r=0;r<ii.cellLength(i[0]);r++){var o=i[e].cells()[r];a(o.element(),n.element())&&(t.isNone()&&(t=x.some(c())),t.each(function(n){ii.mutateCell(i[e],r,Z.elementnew(n,!0))}))}})}var e,r;return i},gu=function(e,r,o,i,u){return cu(e,r,o).map(function(n){var t=su(r,n,i);return function(n,t,e,r,o){for(var i,u,a,c,l,s,f,d=n.row(),m=n.column(),g=d+e.length,h=m+ii.cellLength(e[0]),p=d;p<g;p++)for(var v=m;v<h;v++){i=t,u=p,a=v,c=o,s=l=void 0,l=ii.getCell(i[u],a),s=y.curry(c,l.element()),f=i[u],1<i.length&&1<ii.cellLength(f)&&(0<a&&s(ii.getCellElement(f,a-1))||a<f.length-1&&s(ii.getCellElement(f,a+1))||0<u&&s(ii.getCellElement(i[u-1],a))||u<i.length-1&&s(ii.getCellElement(i[u+1],a)))&&du(t,ii.getCellElement(t[p],v),o,r.cell);var b=ii.getCellElement(e[p-d],v-m),w=r.replace(b);ii.mutateCell(t[p],v,Z.elementnew(w,!0))}return t}(e,t,o,i,u)})},hu=function(n,t,e,r,o){mu(t,n,o,r.cell);var i=lu(e,t),u=su(e,i,r),a=lu(t,u),c=su(t,a,r);return c.slice(0,n).concat(u).concat(c.slice(n,c.length))},pu=function(e,r,n,o,i){var t=e.slice(0,r),u=e.slice(r),a=ii.mapCells(e[n],function(n,t){return 0<r&&r<e.length&&o(ii.getCellElement(e[r-1],t),ii.getCellElement(e[r],t))?ii.getCell(e[r],t):Z.elementnew(i(n.element(),o),!0)});return t.concat([a]).concat(u)},vu=function(n,e,r,o,i){return P.map(n,function(n){var t=0<e&&e<ii.cellLength(n)&&o(ii.getCellElement(n,e-1),ii.getCellElement(n,e))?ii.getCell(n,e):Z.elementnew(i(ii.getCellElement(n,r),o),!0);return ii.addCell(n,e,t)})},bu=function(n,r,o,i,u){var a=o+1;return P.map(n,function(n,t){var e=t===r?Z.elementnew(u(ii.getCellElement(n,o),i),!0):ii.getCell(n,o);return ii.addCell(n,a,e)})},wu=function(n,t,e,r,o){var i=t+1,u=n.slice(0,i),a=n.slice(i),c=ii.mapCells(n[t],function(n,t){return t===e?Z.elementnew(o(n.element(),r),!0):n});return u.concat([c]).concat(a)},yu=function(n,t,e){return n.slice(0,t).concat(n.slice(e+1))},xu=function(n,e,r){var t=P.map(n,function(n){var t=n.cells().slice(0,e).concat(n.cells().slice(r+1));return Z.rowcells(t,n.section())});return P.filter(t,function(n){return 0<n.cells().length})},Cu=function(n,e,r,o){return P.map(n,function(n){return ii.mapCells(n,function(n){return t=n,P.exists(e,function(n){return r(t.element(),n.element())})?Z.elementnew(o(n.element(),r),!0):n;var t})})},Ru=function(n,t,e,r){return void 0!==ii.getCellElement(n[t],e)&&0<t&&r(ii.getCellElement(n[t-1],e),ii.getCellElement(n[t],e))},Su=function(n,t,e){return 0<t&&e(ii.getCellElement(n,t-1),ii.getCellElement(n,t))},Tu=function(e,r,o,n){var t=P.bind(e,function(n,t){return Ru(e,t,r,o)||Su(n,r,o)?[]:[ii.getCell(n,r)]});return Cu(e,t,o,n)},Du=function(e,r,o,n){var i=e[r],t=P.bind(i.cells(),function(n,t){return Ru(e,r,t,o)||Su(i,t,o)?[]:[n]});return Cu(e,t,o,n)},ku=function(n){return{fold:n}},Au=function(){return ku(function(n,t,e,r,o){return n()})},Ou=function(i){return ku(function(n,t,e,r,o){return t(i)})},Nu=function(i,u){return ku(function(n,t,e,r,o){return e(i,u)})},Eu=function(i,u,a){return ku(function(n,t,e,r,o){return r(i,u,a)})},Pu=function(i,u){return ku(function(n,t,e,r,o){return o(i,u)})},Bu=function(n,t,i,u){var e,r,a=n.slice(0),o=(r=t,0===(e=n).length?Au():1===e.length?Ou(0):0===r?Nu(0,1):r===e.length-1?Pu(r-1,r):0<r&&r<e.length-1?Eu(r-1,r,r+1):Au()),c=function(n){return P.map(n,y.constant(0))},l=y.constant(c(a)),s=function(n,t){if(0<=i){var e=Math.max(u.minCellWidth(),a[t]-i);return c(a.slice(0,n)).concat([i,e-a[t]]).concat(c(a.slice(t+1)))}var r=Math.max(u.minCellWidth(),a[n]+i),o=a[n]-r;return c(a.slice(0,n)).concat([r-a[n],o]).concat(c(a.slice(t+1)))},f=s;return o.fold(l,function(n){return u.singleColumnWidth(a[n],i)},f,function(n,t,e){return s(t,e)},function(n,t){if(0<=i)return c(a.slice(0,t)).concat([i]);var e=Math.max(u.minCellWidth(),a[t]+i);return c(a.slice(0,t)).concat([e-a[t]])})},Iu=function(n,t){return St.has(n,t)&&1<parseInt(St.get(n,t),10)},Wu={hasColspan:function(n){return Iu(n,"colspan")},hasRowspan:function(n){return Iu(n,"rowspan")},minWidth:y.constant(10),minHeight:y.constant(10),getInt:function(n,t){return parseInt(ue.get(n,t),10)}},Mu=function(n,t,e){return ue.getRaw(n,t).fold(function(){return e(n)+"px"},function(n){return n})},Lu=function(n){return Mu(n,"width",ao.getPixelWidth)},qu=function(n){return Mu(n,"height",ao.getHeight)},ju=function(n,t,e,r,o){var i=vi(n),u=P.map(i,function(n){return n.map(t.edge)});return P.map(i,function(n,t){return n.filter(y.not(Wu.hasColspan)).fold(function(){var n=hi(u,t);return r(n)},function(n){return e(n,o)})})},_u=function(n){return n.map(function(n){return n+"px"}).getOr("")},zu=function(n,t,e,r){var o=bi(n),i=P.map(o,function(n){return n.map(t.edge)});return P.map(o,function(n,t){return n.filter(y.not(Wu.hasRowspan)).fold(function(){var n=hi(i,t);return r(n)},function(n){return e(n)})})},Fu={getRawWidths:function(n,t){return ju(n,t,Lu,_u)},getPixelWidths:function(n,t,e){return ju(n,t,ao.getPixelWidth,function(n){return n.getOrThunk(e.minCellWidth)},e)},getPercentageWidths:function(n,t,e){return ju(n,t,ao.getPercentageWidth,function(n){return n.fold(function(){return e.minCellWidth()},function(n){return n/e.pixelWidth()*100})},e)},getPixelHeights:function(n,t){return zu(n,t,ao.getHeight,function(n){return n.getOrThunk(Wu.minHeight)})},getRawHeights:function(n,t){return zu(n,t,qu,_u)}},Hu=function(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r},Uu=function(n,e){var t=Zt.justCells(n);return P.map(t,function(n){var t=Hu(n.column(),n.column()+n.colspan(),e);return{element:n.element,width:y.constant(t),colspan:n.colspan}})},Vu=function(n,e){var t=Zt.justCells(n);return P.map(t,function(n){var t=Hu(n.row(),n.row()+n.rowspan(),e);return{element:n.element,height:y.constant(t),rowspan:n.rowspan}})},Gu=function(n,e){return P.map(n.all(),function(n,t){return{element:n.element,height:y.constant(e[t])}})},Xu=function(n){var t=parseInt(n,10),e=y.identity;return{width:y.constant(t),pixelWidth:y.constant(t),getWidths:Fu.getPixelWidths,getCellDelta:e,singleColumnWidth:function(n,t){return[Math.max(Wu.minWidth(),n+t)-n]},minCellWidth:Wu.minWidth,setElementWidth:ao.setPixelWidth,setTableWidth:function(n,t,e){var r=P.foldr(t,function(n,t){return n+t},0);ao.setPixelWidth(n,r)}}},Yu=function(n,t){if(ao.percentageBasedSizeRegex().test(t)){var e=ao.percentageBasedSizeRegex().exec(t);return o=e[1],i=n,u=parseFloat(o),a=Xr(i),{width:y.constant(u),pixelWidth:y.constant(a),getWidths:Fu.getPercentageWidths,getCellDelta:function(n){return n/a*100},singleColumnWidth:function(n,t){return[100-n]},minCellWidth:function(){return Wu.minWidth()/a*100},setElementWidth:ao.setPercentageWidth,setTableWidth:function(n,t,e){var r=u+e;ao.setPercentageWidth(n,r)}}}if(ao.pixelBasedSizeRegex().test(t)){var r=ao.pixelBasedSizeRegex().exec(t);return Xu(r[1])}var o,i,u,a,c=Xr(n);return Xu(c)},$u=function(t){return ao.getRawWidth(t).fold(function(){var n=Xr(t);return Xu(n)},function(n){return Yu(t,n)})},Ku=function(n){return Zt.generate(n)},Ju=function(n){var t=$t(n);return Ku(t)},Qu=function(n,t,e,r){var o=$u(n),i=o.getCellDelta(t),u=Ju(n),a=o.getWidths(u,r,o),c=Bu(a,e,i,o),l=P.map(c,function(n,t){return n+a[t]}),s=Uu(u,l);P.each(s,function(n){o.setElementWidth(n.element(),n.width())}),e===u.grid().columns()-1&&o.setTableWidth(n,l,i)},Zu=function(n,e,r,t){var o=Ju(n),i=Fu.getPixelHeights(o,t),u=P.map(i,function(n,t){return r===t?Math.max(e+n,Wu.minHeight()):n}),a=Vu(o,u),c=Gu(o,u);P.each(c,function(n){ao.setHeight(n.element(),n.height())}),P.each(a,function(n){ao.setHeight(n.element(),n.height())});var l,s=(l=u,P.foldr(l,function(n,t){return n+t},0));ao.setHeight(n,s)},na=function(n,t,e){var r=$u(n),o=Ku(t),i=r.getWidths(o,e,r),u=Uu(o,i);P.each(u,function(n){r.setElementWidth(n.element(),n.width())});var a=P.foldr(i,function(n,t){return t+n},0);0<u.length&&r.setElementWidth(n,a)},ta=function(n){0===Yt.cells(n).length&&de.remove(n)},ea=V.immutable("grid","cursor"),ra=function(n,t,e){return oa(n,t,e).orThunk(function(){return oa(n,0,0)})},oa=function(n,t,e){return x.from(n[t]).bind(function(n){return x.from(n.cells()[e]).bind(function(n){return x.from(n.element())})})},ia=function(n,t,e){return ea(n,oa(n,t,e))},ua=function(n){return P.foldl(n,function(n,t){return P.exists(n,function(n){return n.row()===t.row()})?n:n.concat([t])},[]).sort(function(n,t){return n.row()-t.row()})},aa=function(n){return P.foldl(n,function(n,t){return P.exists(n,function(n){return n.column()===t.column()})?n:n.concat([t])},[]).sort(function(n,t){return n.column()-t.column()})},ca=function(n,t,e){var r=Kt(n,e),o=Zt.generate(r);return li(o,t,!0)},la=na,sa={insertRowBefore:Yi(function(n,t,e,r){var o=t.row(),i=t.row(),u=pu(n,i,o,e,r.getOrInit);return ia(u,i,t.column())},Ki,y.noop,y.noop,Lo),insertRowsBefore:Yi(function(n,t,e,r){var o=t[0].row(),i=t[0].row(),u=ua(t),a=P.foldl(u,function(n,t){return pu(n,i,o,e,r.getOrInit)},n);return ia(a,i,t[0].column())},Ji,y.noop,y.noop,Lo),insertRowAfter:Yi(function(n,t,e,r){var o=t.row(),i=t.row()+t.rowspan(),u=pu(n,i,o,e,r.getOrInit);return ia(u,i,t.column())},Ki,y.noop,y.noop,Lo),insertRowsAfter:Yi(function(n,t,e,r){var o=ua(t),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),a=P.foldl(o,function(n,t){return pu(n,u,i,e,r.getOrInit)},n);return ia(a,u,t[0].column())},Ji,y.noop,y.noop,Lo),insertColumnBefore:Yi(function(n,t,e,r){var o=t.column(),i=t.column(),u=vu(n,i,o,e,r.getOrInit);return ia(u,t.row(),i)},Ki,la,y.noop,Lo),insertColumnsBefore:Yi(function(n,t,e,r){var o=aa(t),i=o[0].column(),u=o[0].column(),a=P.foldl(o,function(n,t){return vu(n,u,i,e,r.getOrInit)},n);return ia(a,t[0].row(),u)},Ji,la,y.noop,Lo),insertColumnAfter:Yi(function(n,t,e,r){var o=t.column(),i=t.column()+t.colspan(),u=vu(n,i,o,e,r.getOrInit);return ia(u,t.row(),i)},Ki,la,y.noop,Lo),insertColumnsAfter:Yi(function(n,t,e,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),u=aa(t),a=P.foldl(u,function(n,t){return vu(n,i,o,e,r.getOrInit)},n);return ia(a,t[0].row(),i)},Ji,la,y.noop,Lo),splitCellIntoColumns:Yi(function(n,t,e,r){var o=bu(n,t.row(),t.column(),e,r.getOrInit);return ia(o,t.row(),t.column())},Ki,la,y.noop,Lo),splitCellIntoRows:Yi(function(n,t,e,r){var o=wu(n,t.row(),t.column(),e,r.getOrInit);return ia(o,t.row(),t.column())},Ki,y.noop,y.noop,Lo),eraseColumns:Yi(function(n,t,e,r){var o=aa(t),i=xu(n,o[0].column(),o[o.length-1].column()),u=ra(i,t[0].row(),t[0].column());return ea(i,u)},Ji,la,ta,Lo),eraseRows:Yi(function(n,t,e,r){var o=ua(t),i=yu(n,o[0].row(),o[o.length-1].row()),u=ra(i,t[0].row(),t[0].column());return ea(i,u)},Ji,y.noop,ta,Lo),makeColumnHeader:Yi(function(n,t,e,r){var o=Tu(n,t.column(),e,r.replaceOrInit);return ia(o,t.row(),t.column())},Ki,y.noop,y.noop,qo("row","th")),unmakeColumnHeader:Yi(function(n,t,e,r){var o=Tu(n,t.column(),e,r.replaceOrInit);return ia(o,t.row(),t.column())},Ki,y.noop,y.noop,qo(null,"td")),makeRowHeader:Yi(function(n,t,e,r){var o=Du(n,t.row(),e,r.replaceOrInit);return ia(o,t.row(),t.column())},Ki,y.noop,y.noop,qo("col","th")),unmakeRowHeader:Yi(function(n,t,e,r){var o=Du(n,t.row(),e,r.replaceOrInit);return ia(o,t.row(),t.column())},Ki,y.noop,y.noop,qo(null,"td")),mergeCells:Yi(function(n,t,e,r){var o=t.cells();Ko(o);var i=fu(n,t.bounds(),e,y.constant(o[0]));return ea(i,x.from(o[0]))},nu,y.noop,y.noop,jo),unmergeCells:Yi(function(n,t,e,r){var o=P.foldr(t,function(n,t){return du(n,t,e,r.combine(t))},n);return ea(o,x.from(t[0]))},tu,la,y.noop,jo),pasteCells:Yi(function(n,e,t,r){var o,i,u,a,c=(o=e.clipboard(),i=e.generators(),u=$t(o),a=Zt.generate(u),li(a,i,!0)),l=Z.address(e.row(),e.column());return gu(l,n,c,e.generators(),t).fold(function(){return ea(n,x.some(e.element()))},function(n){var t=ra(n,e.row(),e.column());return ea(n,t)})},Qi,la,y.noop,Lo),pasteRowsBefore:Yi(function(n,t,e,r){var o=n[t.cells[0].row()],i=t.cells[0].row(),u=ca(t.clipboard(),t.generators(),o),a=hu(i,n,u,t.generators(),e),c=ra(a,t.cells[0].row(),t.cells[0].column());return ea(a,c)},Zi,y.noop,y.noop,Lo),pasteRowsAfter:Yi(function(n,t,e,r){var o=n[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),u=ca(t.clipboard(),t.generators(),o),a=hu(i,n,u,t.generators(),e),c=ra(a,t.cells[0].row(),t.cells[0].column());return ea(a,c)},Zi,y.noop,y.noop,Lo)},fa=function(n){return tn.fromDom(n.getBody())},da=function(n){return n.getBoundingClientRect().width},ma=function(n){return n.getBoundingClientRect().height},ga=function(t){return function(n){return et.eq(n,fa(t))}},ha=function(n){return/^[0-9]+$/.test(n)&&(n+="px"),n},pa=function(n){var t=Nt.descendants(n,"td[data-mce-style],th[data-mce-style]");St.remove(n,"data-mce-style"),P.each(t,function(n){St.remove(n,"data-mce-style")})},va=function(n){return"rtl"===ue.get(n,"direction")?"rtl":"ltr"},ba={onDirection:function(t,e){return function(n){return"rtl"===va(n)?e:t}},getDirection:va},wa={isRtl:y.constant(!1)},ya={isRtl:y.constant(!0)},xa={directionAt:function(n){return"rtl"===ba.getDirection(n)?ya:wa}},Ca=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Ra={"border-collapse":"collapse",width:"100%"},Sa={border:"1"},Ta=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},Da=function(n){return n.getParam("table_row_advtab",!0,"boolean")},ka=function(n){return n.getParam("table_advtab",!0,"boolean")},Aa=function(n){return n.getParam("table_style_by_css",!1,"boolean")},Oa=function(n){return n.getParam("table_cell_class_list",[],"array")},Na=function(n){return n.getParam("table_row_class_list",[],"array")},Ea=function(n){return n.getParam("table_class_list",[],"array")},Pa=function(n){return!1===n.getParam("table_responsive_width")},Ba=function(n,t){return n.fire("newrow",{node:t})},Ia=function(n,t){return n.fire("newcell",{node:t})},Wa=function(n,t,e,r){n.fire("ObjectResizeStart",{target:t,width:e,height:r})},Ma=function(n,t,e,r){n.fire("ObjectResized",{target:t,width:e,height:r})},La=function(s,n){var t,e=function(n){return"table"===wt.name(fa(n))},f=(t=s.getParam("table_clone_elements"),p.isString(t)?x.some(t.split(/[ ,]/)):Array.isArray(t)?x.some(t):x.none()),r=function(u,a,c,l){return function(n,t){pa(n);var e=l(),r=tn.fromDom(s.getDoc()),o=Ao(xa.directionAt),i=Be(c,r,f);return a(n)?u(e,n,t,i,o).bind(function(n){return P.each(n.newRows(),function(n){Ba(s,n.dom())}),P.each(n.newCells(),function(n){Ia(s,n.dom())}),n.cursor().map(function(n){var t=s.dom.createRng();return t.setStart(n.dom(),0),t.setEnd(n.dom(),0),t})}):x.none()}};return{deleteRow:r(sa.eraseRows,function(n){var t=Oo(n);return!1===e(s)||1<t.rows()},y.noop,n),deleteColumn:r(sa.eraseColumns,function(n){var t=Oo(n);return!1===e(s)||1<t.columns()},y.noop,n),insertRowsBefore:r(sa.insertRowsBefore,y.always,y.noop,n),insertRowsAfter:r(sa.insertRowsAfter,y.always,y.noop,n),insertColumnsBefore:r(sa.insertColumnsBefore,y.always,co,n),insertColumnsAfter:r(sa.insertColumnsAfter,y.always,co,n),mergeCells:r(sa.mergeCells,y.always,y.noop,n),unmergeCells:r(sa.unmergeCells,y.always,y.noop,n),pasteRowsBefore:r(sa.pasteRowsBefore,y.always,y.noop,n),pasteRowsAfter:r(sa.pasteRowsAfter,y.always,y.noop,n),pasteCells:r(sa.pasteCells,y.always,y.noop,n)}},qa=function(n,t,r){var e=$t(n),o=Zt.generate(e);return Ji(o,t).map(function(n){var t=li(o,r,!1).slice(n[0].row(),n[n.length-1].row()+n[n.length-1].rowspan()),e=$i(t,r);return di(e)})},ja=tinymce.util.Tools.resolve("tinymce.util.Tools"),_a=function(n,t,e){e&&n.formatter.apply("align"+e,{},t)},za=function(n,t,e){e&&n.formatter.apply("valign"+e,{},t)},Fa=function(t,e){ja.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})},Ha=function(t,e){ja.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},e)})},Ua=function(o,n,i){var t;return t=function(n,t){for(var e=0;e<t.length;e++){var r=o.getStyle(t[e],i);if(void 0===n&&(n=r),n!==r)return""}return n}(t,o.select("td,th",n))},Va=function(n,t){var e=n.dom,r=t.control.rootControl,o=r.toJSON(),i=e.parseStyle(o.style);"style"===t.control.name()?(r.find("#borderStyle").value(i["border-style"]||"")[0].fire("select"),r.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),r.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change"),r.find("#width").value(i.width||"").fire("change"),r.find("#height").value(i.height||"").fire("change")):(i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?ha(o.width):"",i.height=o.height?ha(o.height):""),r.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(i))))},Ga=function(e){var n=function(){var n=e.getParam("color_picker_callback");if(n)return function(t){return n.call(e,function(n){t.control.value(n).fire("change")},t.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:y.curry(Va,e)},items:[{label:"",name:"style",type:"spacer"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:y.curry(Va,e),values:[{text:"Solid",value:"solid"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:n()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:n()}]}]}},Xa=function(n,r,t){var o=function(n,e){return e=e||[],ja.each(n,function(n){var t={text:n.text||n.title};n.menu?t.menu=o(n.menu):(t.value=n.value,r&&r(t)),e.push(t)}),e};return o(n,t||[])},Ya=Va,$a=function(n,t){var e=n.parseStyle(n.getAttrib(t,"style")),r={};return e["border-style"]&&(r.borderStyle=e["border-style"]),e["border-color"]&&(r.borderColor=e["border-color"]),e["background-color"]&&(r.backgroundColor=e["background-color"]),r.style=n.serializeStyle(e),r},Ka=function(r,o,n){var i,u=r.dom;function a(n,t,e){e&&u.setAttrib(n,t,e)}function c(n,t,e){e&&u.setStyle(n,t,e)}Ya(r,n),i=n.control.rootControl.toJSON(),r.undoManager.transact(function(){ja.each(o,function(n){var t,e;a(n,"scope",i.scope),1===o.length?a(n,"style",i.style):(t=n,e=i.style,delete t.dataset.mceStyle,t.style.cssText+=";"+e),a(n,"class",i.class),c(n,"width",ha(i.width)),c(n,"height",ha(i.height)),i.type&&n.nodeName.toLowerCase()!==i.type&&(n=u.rename(n,i.type)),1===o.length&&(Fa(r,n),Ha(r,n)),i.align&&_a(r,n,i.align),i.valign&&za(r,n,i.valign)}),r.focus()})},Ja=function(t){var n,e,r,o=[];if(o=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),n=t.dom.getParent(t.selection.getStart(),"td,th"),!o.length&&n&&o.push(n),n=n||o[0]){var i,u,a,c;1<o.length?e={width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:n.nodeName.toLowerCase()}:(u=n,a=(i=t).dom,c={width:a.getStyle(u,"width")||a.getAttrib(u,"width"),height:a.getStyle(u,"height")||a.getAttrib(u,"height"),scope:a.getAttrib(u,"scope"),class:a.getAttrib(u,"class"),type:u.nodeName.toLowerCase(),style:"",align:"",valign:""},ja.each("left center right".split(" "),function(n){i.formatter.matchNode(u,"align"+n)&&(c.align=n)}),ja.each("top middle bottom".split(" "),function(n){i.formatter.matchNode(u,"valign"+n)&&(c.valign=n)}),Ta(i)&&ja.extend(c,$a(a,u)),e=c),0<Oa(t).length&&(r={name:"class",type:"listbox",label:"Class",values:Xa(Oa(t),function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[n.value]})})})});var l,s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:y.curry(Ya,t)},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Ta(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:e,body:[{title:"General",type:"form",items:s},(l=Ga(t),$.each(l.items,function(n,e){e.items&&$.each(e.items,function(n,t){"borderColor"==t.name&&delete e.items[n]})}),l)],onsubmit:y.curry(Ka,t,o)}):t.windowManager.open({title:"Cell properties",data:e,body:s,onsubmit:y.curry(Ka,t,o)})}};function Qa(s,n,f,t){var d=s.dom;function m(n,t,e){e&&d.setAttrib(n,t,e)}Ya(s,t);var g=t.control.rootControl.toJSON();s.undoManager.transact(function(){ja.each(n,function(n){var t,e,r,o,i,u,a,c,l;m(n,"scope",g.scope),m(n,"style",g.style),m(n,"class",g.class),t=n,e="height",(r=ha(g.height))&&d.setStyle(t,e,r),g.type!==n.parentNode.nodeName.toLowerCase()&&(o=s.dom,i=n,u=g.type,a=o.getParent(i,"table"),c=i.parentNode,(l=o.select(u,a)[0])||(l=o.create(u),a.firstChild?"CAPTION"===a.firstChild.nodeName?o.insertAfter(l,a.firstChild):a.insertBefore(l,a.firstChild):a.appendChild(l)),l.appendChild(i),c.hasChildNodes()||o.remove(c)),g.align!==f.align&&(Fa(s,n),_a(s,n,g.align))}),s.focus()})}var Za=function(t){var n,e,r,o,i,u,a,c,l,s,f=t.dom,d=[];n=f.getParent(t.selection.getStart(),"table"),e=f.getParent(t.selection.getStart(),"td,th"),ja.each(n.rows,function(t){ja.each(t.cells,function(n){if(f.getAttrib(n,"data-mce-selected")||n===e)return d.push(t),!1})}),(r=d[0])&&(1<d.length?i={height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:(c=r,l=(a=t).dom,s={height:l.getStyle(c,"height")||l.getAttrib(c,"height"),scope:l.getAttrib(c,"scope"),class:l.getAttrib(c,"class"),align:"",style:"",type:c.parentNode.nodeName.toLowerCase()},ja.each("left center right".split(" "),function(n){a.formatter.matchNode(c,"align"+n)&&(s.align=n)}),Da(a)&&ja.extend(s,$a(l,c)),i=s),0<Na(t).length&&(o={name:"class",type:"listbox",label:"Class",values:Xa(Na(t),function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[n.value]})})})}),u={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},Da(t)?t.windowManager.open({title:"Row properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},Ga(t)],onsubmit:y.curry(Qa,t,d,i)}):t.windowManager.open({title:"Row properties",data:i,body:u,onsubmit:y.curry(Qa,t,d,i)}))},nc=tinymce.util.Tools.resolve("tinymce.Env"),tc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},ec=function(n,t,e,r,o){void 0===o&&(o=tc);var i=tn.fromTag("table");ue.setAll(i,o.styles),St.setAll(i,o.attributes);var u=tn.fromTag("tbody");le.append(i,u);for(var a=[],c=0;c<n;c++){for(var l=tn.fromTag("tr"),s=0;s<t;s++){var f=c<e||s<r?tn.fromTag("th"):tn.fromTag("td");s<r&&St.set(f,"scope","row"),c<e&&St.set(f,"scope","col"),le.append(f,tn.fromTag("br")),o.percentages&&ue.set(f,"width",100/t+"%"),le.append(l,f)}a.push(l)}return se.append(u,a),i},rc=function(n){return n.dom().innerHTML},oc=function(n){var t=tn.fromTag("div"),e=tn.fromDom(n.dom().cloneNode(!0));return le.append(t,e),rc(t)},ic=function(n,t){n.selection.select(t.dom(),!0),n.selection.collapse(!0)},uc=function(i,n,t){var e,r,o=i.getParam("table_default_styles",Ra,"object"),u={styles:o,attributes:(r=i,r.getParam("table_default_attributes",Sa,"object")),percentages:(e=o.width,p.isString(e)&&-1!==e.indexOf("%")&&!Pa(i))},a=ec(t,n,0,0,u);St.set(a,"data-mce-id","__mce");var c=oc(a);return i.insertContent(c),Ft.descendant(fa(i),'table[data-mce-id="__mce"]').map(function(n){var t,e,r,o;return Pa(i)&&ue.set(n,"width",ue.get(n,"width")),St.remove(n,"data-mce-id"),t=i,e=n,P.each(Nt.descendants(e,"tr"),function(n){Ba(t,n.dom()),P.each(Nt.descendants(n,"th,td"),function(n){Ia(t,n.dom())})}),r=i,o=n,Ft.descendant(o,"td,th").each(y.curry(ic,r)),n.dom()}).getOr(null)};function ac(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)n.setStyle(t,e,r);else if(t.children)for(var o=0;o<t.children.length;o++)ac(n,t.children[o],e,r)}var cc=function(n,t,e){var r,o,i=n.dom;Ya(n,e),!1===(o=e.control.rootControl.toJSON()).class&&delete o.class,n.undoManager.transact(function(){t||(t=uc(n,o.cols||1,o.rows||1)),function(n,t,e){var r,o=n.dom,i={},u={};if(i.class=e.class,u.height=ha(e.height),o.getAttrib(t,"width")&&!Aa(n)?i.width=(r=e.width)?r.replace(/px$/,""):"":u.width=ha(e.width),Aa(n)?(u["border-width"]=ha(e.border),u["border-spacing"]=ha(e.cellspacing),ja.extend(i,{"data-mce-border-color":e.borderColor,"data-mce-cell-padding":e.cellpadding,"data-mce-border":e.border})):ja.extend(i,{border:e.border,cellpadding:e.cellpadding,cellspacing:e.cellspacing}),Aa(n)&&t.children)for(var a=0;a<t.children.length;a++)ac(o,t.children[a],{"border-width":ha(e.border),"border-color":e.borderColor,padding:ha(e.cellpadding)});e.style?ja.extend(u,o.parseStyle(e.style)):u=ja.extend({},o.parseStyle(o.getAttrib(t,"style")),u),i.style=o.serializeStyle(u),o.setAttribs(t,i)}(n,t,o),(r=i.select("caption",t)[0])&&!o.caption&&i.remove(r),!r&&o.caption&&((r=i.create("caption")).innerHTML=nc.ie?"Â ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),Fa(n,t),o.align&&_a(n,t,o.align),n.focus(),n.addVisual()})},lc=function(t,n){var e,r,o,i,u,a,c,l,s,f,d=t.dom,m={};!0===n?(e=d.getParent(t.selection.getStart(),"table"))&&(c=e,l=(a=t).dom,s={width:l.getStyle(c,"width")||l.getAttrib(c,"width"),height:l.getStyle(c,"height")||l.getAttrib(c,"height"),cellspacing:l.getStyle(c,"border-spacing")||l.getAttrib(c,"cellspacing"),cellpadding:l.getAttrib(c,"data-mce-cell-padding")||l.getAttrib(c,"cellpadding")||Ua(a.dom,c,"padding"),border:l.getAttrib(c,"data-mce-border")||l.getAttrib(c,"border")||Ua(a.dom,c,"border"),borderColor:l.getAttrib(c,"data-mce-border-color"),caption:!!l.select("caption",c)[0],class:l.getAttrib(c,"class")},ja.each("left center right".split(" "),function(n){a.formatter.matchNode(c,"align"+n)&&(s.align=n)}),ka(a)&&ja.extend(s,$a(l,c)),m=s):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),0<Ea(t).length&&(m.class&&(m.class=m.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:Xa(Ea(t),function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[n.value]})})})}),u={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:(f=t,f.getParam("table_appearance_options",!0,"boolean")?[r,o,{label:"Width",name:"width",onchange:y.curry(Ya,t)},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"}]:[r,o,{label:"Width",name:"width",onchange:y.curry(Ya,t)},{label:"Height",name:"height",onchange:y.curry(Ya,t)}])},i]},ka(t)?t.windowManager.open({title:"Table properties",data:m,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},Ga(t)],onsubmit:y.curry(cc,t,e)}):t.windowManager.open({title:"Table properties",data:m,body:u,onsubmit:y.curry(cc,t,e)})},sc=ja.each,fc=function(a,t,c,l,e){var r=ga(a),s=function(){return tn.fromDom(a.dom.getParent(a.selection.getStart(),"th,td"))},f=function(n){return Yt.table(n,r)},d=function(n){return{width:da(n.dom()),height:da(n.dom())}},o=function(t){var e=s();f(e).each(function(i){var n=_r.forMenu(l,i,e),u=d(i);t(i,n).each(function(n){var t,e,r,o;t=a,e=u,o=d(r=i),e.width===o.width&&e.height===o.height||(Wa(t,r.dom(),e.width,e.height),Ma(t,r.dom(),o.width,o.height)),a.selection.setRng(n),a.focus(),c.clear(i),pa(i)})})},i=function(n){var o=s();return f(o).bind(function(n){var t=tn.fromDom(a.getDoc()),e=_r.forMenu(l,n,o),r=Be(y.noop,t,x.none());return qa(n,e,r)})},u=function(u){e.get().each(function(n){var o=P.map(n,function(n){return we(n)}),i=s();f(i).bind(function(t){var n=tn.fromDom(a.getDoc()),e=Ie(n),r=_r.pasteRows(l,t,i,o,e);u(t,r).each(function(n){a.selection.setRng(n),a.focus(),c.clear(t)})})})};sc({mceTableSplitCells:function(){o(t.unmergeCells)},mceTableMergeCells:function(){o(t.mergeCells)},mceTableInsertRowBefore:function(){o(t.insertRowsBefore)},mceTableInsertRowAfter:function(){o(t.insertRowsAfter)},mceTableInsertColBefore:function(){o(t.insertColumnsBefore)},mceTableInsertColAfter:function(){o(t.insertColumnsAfter)},mceTableDeleteCol:function(){o(t.deleteColumn)},mceTableDeleteRow:function(){o(t.deleteRow)},mceTableCutRow:function(n){e.set(i()),o(t.deleteRow)},mceTableCopyRow:function(n){e.set(i())},mceTablePasteRowBefore:function(n){u(t.pasteRowsBefore)},mceTablePasteRowAfter:function(n){u(t.pasteRowsAfter)},mceTableDelete:function(){var n=tn.fromDom(a.dom.getParent(a.selection.getStart(),"th,td"));Yt.table(n,r).filter(y.not(r)).each(function(n){var t=tn.fromText("");le.after(n,t),de.remove(n);var e=a.dom.createRng();e.setStart(t.dom(),0),e.setEnd(t.dom(),0),a.selection.setRng(e)})}},function(n,t){a.addCommand(t,n)}),sc({mceInsertTable:y.curry(lc,a),mceTableProps:y.curry(lc,a,!0),mceTableRowProps:y.curry(Za,a),mceTableCellProps:y.curry(Ja,a)},function(e,n){a.addCommand(n,function(n,t){e(t)})})},dc=function(n){var t=x.from(n.dom().documentElement).map(tn.fromDom).getOr(n);return{parent:y.constant(t),view:y.constant(n),origin:y.constant(fo(0,0))}},mc=function(n,t){return{parent:y.constant(t),view:y.constant(n),origin:y.constant(fo(0,0))}};function gc(n){var e=V.immutable.apply(null,n),r=[];return{bind:function(n){if(void 0===n)throw"Event bind error: undefined handler";r.push(n)},unbind:function(t){r=P.filter(r,function(n){return n!==t})},trigger:function(){var t=e.apply(null,arguments);P.each(r,function(n){n(t)})}}}var hc={create:function(n){return{registry:q.map(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:q.map(n,function(n){return n.trigger})}}},pc={mode:Io.exactly(["compare","extract","mutate","sink"]),sink:Io.exactly(["element","start","stop","destroy"]),api:Io.exactly(["forceDrop","drop","move","delayDrop"])},vc={resolve:xi("ephox-dragster").resolve},bc=function(m,g){return function(n){if(m(n)){var t,e,r,o,i,u,a,c=tn.fromDom(n.target),l=function(){n.stopPropagation()},s=function(){n.preventDefault()},f=y.compose(s,l),d=(t=c,e=n.clientX,r=n.clientY,o=l,i=s,u=f,a=n,{target:y.constant(t),x:y.constant(e),y:y.constant(r),stop:o,prevent:i,kill:u,raw:y.constant(a)});g(d)}}},wc=function(n,t,e,r,o){var i=bc(e,r);return n.dom().addEventListener(t,i,o),{unbind:y.curry(yc,n,t,i,o)}},yc=function(n,t,e,r){n.dom().removeEventListener(t,e,r)},xc=function(n,t,e,r){return wc(n,t,e,r,!1)},Cc=function(n,t,e,r){return wc(n,t,e,r,!0)},Rc=y.constant(!0),Sc={bind:function(n,t,e){return xc(n,t,Rc,e)},capture:function(n,t,e){return Cc(n,t,Rc,e)}},Tc=pc.mode({compare:function(n,t){return fo(t.left()-n.left(),t.top()-n.top())},extract:function(n){return x.some(fo(n.x(),n.y()))},sink:function(n,t){var e,r,o,i=(e=t,r=ni.merge({layerClass:vc.resolve("blocker")},e),o=tn.fromTag("div"),St.set(o,"role","presentation"),ue.setAll(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Mi.add(o,vc.resolve("blocker")),Mi.add(o,r.layerClass),{element:function(){return o},destroy:function(){de.remove(o)}}),u=Sc.bind(i.element(),"mousedown",n.forceDrop),a=Sc.bind(i.element(),"mouseup",n.drop),c=Sc.bind(i.element(),"mousemove",n.move),l=Sc.bind(i.element(),"mouseout",n.delayDrop);return pc.sink({element:i.element,start:function(n){le.append(n,i.element())},stop:function(){de.remove(i.element())},destroy:function(){i.destroy(),a.unbind(),c.unbind(),l.unbind(),u.unbind()}})},mutate:function(n,t){n.mutate(t.left(),t.top())}});function Dc(){var i=x.none(),u=hc.create({move:gc(["info"])});return{onEvent:function(n,o){o.extract(n).each(function(n){var t,e,r;(t=o,e=n,r=i.map(function(n){return t.compare(n,e)}),i=x.some(e),r).each(function(n){u.trigger.move(n)})})},reset:function(){i=x.none()},events:u.registry}}function kc(){var n={onEvent:function(n,t){},reset:y.noop},t=Dc(),e=n;return{on:function(){e.reset(),e=t},off:function(){e.reset(),e=n},isOn:function(){return e===t},onEvent:function(n,t){e.onEvent(n,t)},events:t.events}}var Ac=function(t,e){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){var n=arguments;null!==r&&clearTimeout(r),r=setTimeout(function(){t.apply(null,n),n=r=null},e)}}},Oc=function(t,e,n){var r=!1,o=hc.create({start:gc([]),stop:gc([])}),i=kc(),u=function(){l.stop(),i.isOn()&&(i.off(),o.trigger.stop())},a=Ac(u,200);i.events.move.bind(function(n){e.mutate(t,n.info())});var c=function(t){return function(){var n=Array.prototype.slice.call(arguments,0);if(r)return t.apply(null,n)}},l=e.sink(pc.api({forceDrop:u,drop:c(u),move:c(function(n,t){a.cancel(),i.onEvent(n,e)}),delayDrop:c(a.throttle)}),n);return{element:l.element,go:function(n){l.start(n),i.on(),o.trigger.start()},on:function(){r=!0},off:function(){r=!1},destroy:function(){l.destroy()},events:o.registry}},Nc={transform:function(n,t){var e=void 0!==t?t:{},r=void 0!==e.mode?e.mode:Tc;return Oc(n,r,t)}};function Ec(){var e,r=hc.create({drag:gc(["xDelta","yDelta","target"])}),o=x.none(),n={mutate:function(n,t){e.trigger.drag(n,t)},events:(e=hc.create({drag:gc(["xDelta","yDelta"])})).registry};return n.events.drag.bind(function(t){o.each(function(n){r.trigger.drag(t.xDelta(),t.yDelta(),n)})}),{assign:function(n){o=x.some(n)},get:function(){return o},mutate:n.mutate,events:r.registry}}var Pc={any:function(n){return Ft.first(n).isSome()},ancestor:function(n,t,e){return Ft.ancestor(n,t,e).isSome()},sibling:function(n,t){return Ft.sibling(n,t).isSome()},child:function(n,t){return Ft.child(n,t).isSome()},descendant:function(n,t){return Ft.descendant(n,t).isSome()},closest:function(n,t,e){return Ft.closest(n,t,e).isSome()}},Bc=Ci.resolve("resizer-bar-dragging");function Ic(n,e){var r=Do.height,t=function(o,t,i){var e=Ec(),r=Nc.transform(e,{}),u=x.none(),n=function(n,t){return x.from(St.get(n,t))};e.events.drag.bind(function(e){n(e.target(),"data-row").each(function(n){var t=Wu.getInt(e.target(),"top");ue.set(e.target(),"top",t+e.yDelta()+"px")}),n(e.target(),"data-column").each(function(n){var t=Wu.getInt(e.target(),"left");ue.set(e.target(),"left",t+e.xDelta()+"px")})});var a=function(n,t){return Wu.getInt(n,t)-parseInt(St.get(n,"data-initial-"+t),10)};r.events.stop.bind(function(){e.get().each(function(r){u.each(function(e){n(r,"data-row").each(function(n){var t=a(r,"top");St.remove(r,"data-initial-top"),d.trigger.adjustHeight(e,t,parseInt(n,10))}),n(r,"data-column").each(function(n){var t=a(r,"left");St.remove(r,"data-initial-left"),d.trigger.adjustWidth(e,t,parseInt(n,10))}),Ui.refresh(o,e,i,t)})})});var c=function(n,t){d.trigger.startAdjust(),e.assign(n),St.set(n,"data-initial-"+t,parseInt(ue.get(n,t),10)),Mi.add(n,Bc),ue.set(n,"opacity","0.2"),r.go(o.parent())},l=Sc.bind(o.parent(),"mousedown",function(n){Ui.isRowBar(n.target())&&c(n.target(),"top"),Ui.isColBar(n.target())&&c(n.target(),"left")}),s=function(n){return et.eq(n,o.view())},f=Sc.bind(o.view(),"mouseover",function(n){"table"===wt.name(n.target())||Pc.closest(n.target(),"table",s)?(u="table"===wt.name(n.target())?x.some(n.target()):Ft.ancestor(n.target(),"table",s)).each(function(n){Ui.refresh(o,n,i,t)}):kt.inBody(n.target())&&Ui.destroy(o)}),d=hc.create({adjustHeight:gc(["table","delta","row"]),adjustWidth:gc(["table","delta","column"]),startAdjust:gc([])});return{destroy:function(){l.unbind(),f.unbind(),r.destroy(),Ui.destroy(o)},refresh:function(n){Ui.refresh(o,n,i,t)},on:r.on,off:r.off,hideBars:y.curry(Ui.hide,o),showBars:y.curry(Ui.show,o),events:d.registry}}(n,e,r),o=hc.create({beforeResize:gc(["table"]),afterResize:gc(["table"]),startDrag:gc([])});return t.events.adjustHeight.bind(function(n){o.trigger.beforeResize(n.table());var t=r.delta(n.delta(),n.table());Zu(n.table(),t,n.row(),r),o.trigger.afterResize(n.table())}),t.events.startAdjust.bind(function(n){o.trigger.startDrag()}),t.events.adjustWidth.bind(function(n){o.trigger.beforeResize(n.table());var t=e.delta(n.delta(),n.table());Qu(n.table(),t,n.column(),e),o.trigger.afterResize(n.table())}),{on:t.on,off:t.off,hideBars:t.hideBars,showBars:t.showBars,destroy:t.destroy,events:o.registry}}var Wc=function(n,t){return n.inline?mc(fa(n),(e=tn.fromTag("div"),ue.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),le.append(kt.body(),e),e)):dc(tn.fromDom(n.getDoc()));var e},Mc=function(n,t){n.inline&&de.remove(t.parent())},Lc=function(u){var a,c,o=x.none(),i=x.none(),l=x.none(),s=/(\d+(\.\d+)?)%/,f=function(n){return"TABLE"===n.nodeName};return u.on("init",function(){var n,t=Ao(xa.directionAt),e=Wc(u);if(l=x.some(e),("table"===(n=u.getParam("object_resizing",!0))||n)&&u.getParam("table_resize_bars",!0,"boolean")){var r=Ic(e,t);r.on(),r.events.startDrag.bind(function(n){o=x.some(u.selection.getRng())}),r.events.beforeResize.bind(function(n){var t=n.table().dom();Wa(u,t,da(t),ma(t))}),r.events.afterResize.bind(function(n){var t=n.table(),e=t.dom();pa(t),o.each(function(n){u.selection.setRng(n),u.focus()}),Ma(u,e,da(e),ma(e)),u.undoManager.add()}),i=x.some(r)}}),u.on("ObjectResizeStart",function(n){var t,e=n.target;f(e)&&(a=n.width,t=e,c=u.dom.getStyle(t,"width")||u.dom.getAttrib(t,"width"))}),u.on("ObjectResized",function(n){var t=n.target;if(f(t)){var e=t;if(s.test(c)){var r=parseFloat(s.exec(c)[1]),o=n.width*r/a;u.dom.setStyle(e,"width",o+"%")}else{var i=[];ja.each(e.rows,function(n){ja.each(n.cells,function(n){var t=u.dom.getStyle(n,"width",!0);i.push({cell:n,width:t})})}),ja.each(i,function(n){u.dom.setStyle(n.cell,"width",n.width),u.dom.setAttrib(n.cell,"width",null)})}}}),{lazyResize:function(){return i},lazyWire:function(){return l.getOr(dc(tn.fromDom(u.getBody())))},destroy:function(){i.each(function(n){n.destroy()}),l.each(function(n){Mc(u,n)})}}},qc=function(n){return{fold:n}},jc=function(o){return qc(function(n,t,e,r){return n(o)})},_c=function(o){return qc(function(n,t,e,r){return t(o)})},zc=function(o,i){return qc(function(n,t,e,r){return e(o,i)})},Fc=function(o){return qc(function(n,t,e,r){return r(o)})},Hc=function(e,n){return Yt.table(e,n).bind(function(n){var t=Yt.cells(n);return P.findIndex(t,function(n){return et.eq(e,n)}).map(function(n){return{index:y.constant(n),all:y.constant(t)}})})},Uc=function(t,n){return Hc(t,n).fold(function(){return jc(t)},function(n){return n.index()+1<n.all().length?zc(t,n.all()[n.index()+1]):Fc(t)})},Vc=function(t,n){return Hc(t,n).fold(function(){return jc()},function(n){return 0<=n.index()-1?zc(t,n.all()[n.index()-1]):_c(t)})},Gc=Er([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xc={before:Gc.before,on:Gc.on,after:Gc.after,cata:function(n,t,e,r){return n.fold(t,e,r)},getStart:function(n){return n.fold(y.identity,y.identity,y.identity)}},Yc=Er([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$c=V.immutable("start","soffset","finish","foffset"),Kc={domRange:Yc.domRange,relative:Yc.relative,exact:Yc.exact,exactFromRange:function(n){return Yc.exact(n.start(),n.soffset(),n.finish(),n.foffset())},range:$c,getWin:function(n){var t=n.match({domRange:function(n){return tn.fromDom(n.startContainer)},relative:function(n,t){return Xc.getStart(n)},exact:function(n,t,e,r){return n}});return st.defaultView(t)}},Jc=function(n,t,e,r){var o=st.owner(n).dom().createRange();return o.setStart(n.dom(),t),o.setEnd(e.dom(),r),o},Qc=function(n,t,e,r){var o=Jc(n,t,e,r),i=et.eq(n,e)&&t===r;return o.collapsed&&!i},Zc=function(n,t){n.selectNodeContents(t.dom())},nl=function(n){n.deleteContents()},tl=function(n){return{left:y.constant(n.left),top:y.constant(n.top),right:y.constant(n.right),bottom:y.constant(n.bottom),width:y.constant(n.width),height:y.constant(n.height)}},el={create:function(n){return n.document.createRange()},replaceWith:function(n,t){nl(n),n.insertNode(t.dom())},selectNodeContents:function(n,t){var e=n.document.createRange();return Zc(e,t),e},selectNodeContentsUsing:Zc,relativeToNative:function(n,t,e){var r,o,i=n.document.createRange();return r=i,t.fold(function(n){r.setStartBefore(n.dom())},function(n,t){r.setStart(n.dom(),t)},function(n){r.setStartAfter(n.dom())}),o=i,e.fold(function(n){o.setEndBefore(n.dom())},function(n,t){o.setEnd(n.dom(),t)},function(n){o.setEndAfter(n.dom())}),i},exactToNative:function(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},deleteContents:nl,cloneFragment:function(n){var t=n.cloneContents();return tn.fromDom(t)},getFirstRect:function(n){var t=n.getClientRects(),e=0<t.length?t[0]:n.getBoundingClientRect();return 0<e.width||0<e.height?x.some(e).map(tl):x.none()},getBounds:function(n){var t=n.getBoundingClientRect();return 0<t.width||0<t.height?x.some(t).map(tl):x.none()},isWithin:function(n,t){return t.compareBoundaryPoints(n.END_TO_START,n)<1&&-1<t.compareBoundaryPoints(n.START_TO_END,n)},toString:function(n){return n.toString()}},rl=Er([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ol=function(n,t,e){return t(tn.fromDom(e.startContainer),e.startOffset,tn.fromDom(e.endContainer),e.endOffset)},il=function(n,t){var o,e,r,i=(o=n,t.match({domRange:function(n){return{ltr:y.constant(n),rtl:x.none}},relative:function(n,t){return{ltr:wn(function(){return el.relativeToNative(o,n,t)}),rtl:wn(function(){return x.some(el.relativeToNative(o,t,n))})}},exact:function(n,t,e,r){return{ltr:wn(function(){return el.exactToNative(o,n,t,e,r)}),rtl:wn(function(){return x.some(el.exactToNative(o,e,r,n,t))})}}}));return(r=(e=i).ltr()).collapsed?e.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return rl.rtl(tn.fromDom(n.endContainer),n.endOffset,tn.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return ol(0,rl.ltr,r)}):ol(0,rl.ltr,r)},ul={ltr:rl.ltr,rtl:rl.rtl,diagnose:il,asLtrRange:function(i,n){return il(i,n).match({ltr:function(n,t,e,r){var o=i.document.createRange();return o.setStart(n.dom(),t),o.setEnd(e.dom(),r),o},rtl:function(n,t,e,r){var o=i.document.createRange();return o.setStart(e.dom(),r),o.setEnd(n.dom(),t),o}})}},al=function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},cl=function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,u=1;u<o;u++){var a=n(u),c=Math.abs(t-a.left);if(e>a.bottom);else{if(e<a.top||i<c)return u-1;i=c}}return 0},ll={locate:function(l,s,f,d){var n=l.dom().createRange();n.selectNode(s.dom());var t=n.getClientRects();return ei(t,function(n){return al(n,f,d)?x.some(n):x.none()}).map(function(n){return e=l,t=f,o=d,i=n,u=function(n){var t=e.dom().createRange();return t.setStart(r.dom(),n),t.collapse(!0),t},a=Ce.get(r=s).length,c=cl(function(n){return u(n).getBoundingClientRect()},t,o,i.right,a),u(c);var e,r,t,o,i,u,a,c})}},sl=function(t,n,e,r){var o=t.dom().createRange(),i=st.children(n);return ei(i,function(n){return o.selectNode(n.dom()),al(o.getBoundingClientRect(),e,r)?fl(t,n,e,r):x.none()})},fl=function(n,t,e,r){return(wt.isText(t)?ll.locate:sl)(n,t,e,r)},dl=function(n,t,e,r){var o=n.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,e)),a=Math.max(i.top,Math.min(i.bottom,r));return fl(n,t,u,a)},ml=function(n,t){return t-n.left<n.right-t},gl=function(n,t,e){var r=n.dom().createRange();return r.selectNode(t.dom()),r.collapse(e),r},hl=function(t,n,e){var r=t.dom().createRange();r.selectNode(n.dom());var o=r.getBoundingClientRect(),i=ml(o,e);return(!0===i?Ae.first:Ae.last)(n).map(function(n){return gl(t,n,i)})},pl=function(n,t,e){var r=t.dom().getBoundingClientRect(),o=ml(r,e);return x.some(gl(n,t,o))},vl=function(n,t,e){return(0===st.children(t).length?pl:hl)(n,t,e)},bl=document.caretPositionFromPoint?function(e,n,t){return x.from(e.dom().caretPositionFromPoint(n,t)).bind(function(n){if(null===n.offsetNode)return x.none();var t=e.dom().createRange();return t.setStart(n.offsetNode,n.offset),t.collapse(),x.some(t)})}:document.caretRangeFromPoint?function(n,t,e){return x.from(n.dom().caretRangeFromPoint(t,e))}:function(e,r,o){return tn.fromPoint(e,r,o).bind(function(n){var t=function(){return vl(e,n,r)};return 0===st.children(n).length?t():function(n,t,e,r){var o=n.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,e)),a=Math.max(i.top,Math.min(i.bottom,r));return dl(n,t,u,a)}(e,n,r,o).orThunk(t)})},wl=function(n,t,e){var r=tn.fromDom(n.document);return bl(r,t,e).map(function(n){return Kc.range(tn.fromDom(n.startContainer),n.startOffset,tn.fromDom(n.endContainer),n.endOffset)})},yl=function(n,t){var e=wt.name(n);return"input"===e?Xc.after(n):P.contains(["br","img"],e)?0===t?Xc.before(n):Xc.after(n):Xc.on(n,t)},xl=function(n,t){var e=n.fold(Xc.before,yl,Xc.after),r=t.fold(Xc.before,yl,Xc.after);return Kc.relative(e,r)},Cl=function(n,t,e,r){var o=yl(n,t),i=yl(e,r);return Kc.relative(o,i)},Rl=function(n){return n.match({domRange:function(n){var t=tn.fromDom(n.startContainer),e=tn.fromDom(n.endContainer);return Cl(t,n.startOffset,e,n.endOffset)},relative:xl,exact:Cl})},Sl=xl,Tl=Cl,Dl=function(n,t){x.from(n.getSelection()).each(function(n){n.removeAllRanges(),n.addRange(t)})},kl=function(n,t,e,r,o){var i=el.exactToNative(n,t,e,r,o);Dl(n,i)},Al=function(i,n){return ul.diagnose(i,n).match({ltr:function(n,t,e,r){kl(i,n,t,e,r)},rtl:function(n,t,e,r){var o=i.getSelection();o.setBaseAndExtent?o.setBaseAndExtent(n.dom(),t,e.dom(),r):o.extend?(o.collapse(n.dom(),t),o.extend(e.dom(),r)):kl(i,e,r,n,t)}})},Ol=function(n){var t=tn.fromDom(n.anchorNode),e=tn.fromDom(n.focusNode);return Qc(t,n.anchorOffset,e,n.focusOffset)?x.some(Kc.range(tn.fromDom(n.anchorNode),n.anchorOffset,tn.fromDom(n.focusNode),n.focusOffset)):function(n){if(0<n.rangeCount){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return x.some(Kc.range(tn.fromDom(t.startContainer),t.startOffset,tn.fromDom(e.endContainer),e.endOffset))}return x.none()}(n)},Nl=function(n){return x.from(n.getSelection()).filter(function(n){return 0<n.rangeCount}).bind(Ol)},El=function(n,t,e,r,o){var i=Tl(t,e,r,o);Al(n,i)},Pl=function(n){return Nl(n).map(function(n){return Kc.exact(n.start(),n.soffset(),n.finish(),n.foffset())})},Bl=function(n,t,e){var r=Sl(t,e);Al(n,r)},Il=function(n){var o=Kc.getWin(n).dom(),t=function(n,t,e,r){return el.exactToNative(o,n,t,e,r)},e=Rl(n);return ul.diagnose(o,e).match({ltr:t,rtl:t})},Wl=function(n,t){var e=el.selectNodeContents(n,t);Dl(n,e)},Ml=function(n){n.getSelection().removeAllRanges()},Ll=function(n,t){var e=ul.asLtrRange(n,t);return el.getFirstRect(e)},ql=function(n,t,e){return wl(n,t,e)},jl=tinymce.util.Tools.resolve("tinymce.util.VK"),_l=function(n,t,e,r){return Hl(n,t,Uc(e),r)},zl=function(n,t,e,r){return Hl(n,t,Vc(e),r)},Fl=function(n,t){var e=Kc.exact(t,0,t,0);return Il(e)},Hl=function(o,n,t,i,e){return t.fold(x.none,x.none,function(n,t){return Ae.first(t).map(function(n){return Fl(0,n)})},function(r){return Yt.table(r,n).bind(function(n){var t,e=_r.noMenu(r);return o.undoManager.transact(function(){i.insertRowsAfter(n,e)}),t=Nt.descendants(n,"tr"),P.last(t).bind(function(n){return Ft.descendant(n,"td,th").map(function(n){return Fl(0,n)})})})})},Ul=["table","li","dl"],Vl=function(t,e,r,o){if(t.keyCode===jl.TAB){var i=fa(e),u=function(n){var t=wt.name(n);return et.eq(n,i)||P.contains(Ul,t)},n=e.selection.getRng();if(n.collapsed){var a=tn.fromDom(n.startContainer);Yt.cell(a,u).each(function(n){t.preventDefault(),(t.shiftKey?zl:_l)(e,u,n,r,o).each(function(n){e.selection.setRng(n)})})}}},Gl={response:V.immutable("selection","kill")},Xl=function(t){return function(n){return n===t}},Yl=Xl(38),$l=Xl(40),Kl={ltr:{isBackward:Xl(37),isForward:Xl(39)},rtl:{isBackward:Xl(39),isForward:Xl(37)},isUp:Yl,isDown:$l,isNavigation:function(n){return 37<=n&&n<=40}},Jl=function(n,t){var e=ul.asLtrRange(n,t);return{start:y.constant(tn.fromDom(e.startContainer)),soffset:y.constant(e.startOffset),finish:y.constant(tn.fromDom(e.endContainer)),foffset:y.constant(e.endOffset)}},Ql=function(n,t,e,r){return{start:y.constant(Xc.on(n,t)),finish:y.constant(Xc.on(e,r))}},Zl=(Zn.detect().browser.isSafari(),function(n){var t=void 0!==n?n.dom():document,e=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return fo(e,r)}),ns=Zl,ts=function(n,t,e){(void 0!==e?e.dom():document).defaultView.scrollBy(n,t)};function es(i){return{elementFromPoint:function(n,t){return tn.fromPoint(tn.fromDom(i.document),n,t)},getRect:function(n){return n.dom().getBoundingClientRect()},getRangedRect:function(n,t,e,r){var o=Kc.exact(n,t,e,r);return Ll(i,o).map(function(n){return q.map(n,y.apply)})},getSelection:function(){return Pl(i).map(function(n){return Jl(i,n)})},fromSitus:function(n){var t=Kc.relative(n.start(),n.finish());return Jl(i,t)},situsFromPoint:function(n,t){return ql(i,n,t).map(function(n){return{start:y.constant(Xc.on(n.start(),n.soffset())),finish:y.constant(Xc.on(n.finish(),n.foffset()))}})},clearSelection:function(){Ml(i)},setSelection:function(n){El(i,n.start(),n.soffset(),n.finish(),n.foffset())},setRelativeSelection:function(n,t){Bl(i,n,t)},selectContents:function(n){Wl(i,n)},getInnerHeight:function(){return i.innerHeight},getScrollY:function(){return ns(tn.fromDom(i.document)).top()},scrollBy:function(n,t){ts(n,t,tn.fromDom(i.document))}}}var rs=function(e,n,r,t,o){return et.eq(r,t)?x.none():xr(r,t,n).bind(function(n){var t=n.boxes().getOr([]);return 0<t.length?(o(e,t,n.start(),n.finish()),x.some(Gl.response(x.some(Ql(r,0,r,Te(r))),!0))):x.none()})},os={sync:function(e,r,n,t,o,i,u){return et.eq(n,o)&&t===i?x.none():Ft.closest(n,"td,th",r).bind(function(t){return Ft.closest(o,"td,th",r).bind(function(n){return rs(e,r,t,n,u)})})},detect:rs,update:function(n,t,e,r,o){return Rr(r,n,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(n){return o.clear(e),o.selectRange(e,n.boxes(),n.start(),n.finish()),n.boxes()})}},is=V.immutableBag(["left","top","right","bottom"],[]),us={nu:is,moveUp:function(n,t){return is({left:n.left(),top:n.top()-t,right:n.right(),bottom:n.bottom()-t})},moveDown:function(n,t){return is({left:n.left(),top:n.top()+t,right:n.right(),bottom:n.bottom()+t})},moveBottomTo:function(n,t){var e=n.bottom()-n.top();return is({left:n.left(),top:t-e,right:n.right(),bottom:t})},moveTopTo:function(n,t){var e=n.bottom()-n.top();return is({left:n.left(),top:t,right:n.right(),bottom:t+e})},getTop:function(n){return n.top()},getBottom:function(n){return n.bottom()},translate:function(n,t,e){return is({left:n.left()+t,top:n.top()+e,right:n.right()+t,bottom:n.bottom()+e})},toString:function(n){return"("+n.left()+", "+n.top()+") -> ("+n.right()+", "+n.bottom()+")"}},as=function(n){return us.nu({left:n.left,top:n.top,right:n.right,bottom:n.bottom})},cs=function(n,t){return x.some(n.getRect(t))},ls=function(n,t,e){return wt.isElement(t)?cs(n,t).map(as):wt.isText(t)?(r=n,o=t,i=e,0<=i&&i<Te(o)?r.getRangedRect(o,i,o,i+1):0<i?r.getRangedRect(o,i-1,o,i):x.none()).map(as):x.none();var r,o,i},ss=function(n,t){return wt.isElement(t)?cs(n,t).map(as):wt.isText(t)?n.getRangedRect(t,0,t,Te(t)).map(as):x.none()},fs=V.immutable("item","mode"),ds=function(n,t,e,r){var o=void 0!==r?r:ms;return n.property().parent(t).map(function(n){return fs(n,o)})},ms=function(n,t,e,r){var o=void 0!==r?r:gs;return e.sibling(n,t).map(function(n){return fs(n,o)})},gs=function(n,t,e,r){var o=void 0!==r?r:gs,i=n.property().children(t);return e.first(i).map(function(n){return fs(n,o)})},hs=[{current:ds,next:ms,fallback:x.none()},{current:ms,next:gs,fallback:x.some(ds)},{current:gs,next:gs,fallback:x.some(ms)}],ps=function(t,e,r,o,n){return n=void 0!==n?n:hs,P.find(n,function(n){return n.current===r}).bind(function(n){return n.current(t,e,o,n.next).orThunk(function(){return n.fallback.bind(function(n){return ps(t,e,n,o)})})})},vs={backtrack:ds,sidestep:ms,advance:gs,go:ps},bs={left:function(){return{sibling:function(n,t){return n.query().prevSibling(t)},first:function(n){return 0<n.length?x.some(n[n.length-1]):x.none()}}},right:function(){return{sibling:function(n,t){return n.query().nextSibling(t)},first:function(n){return 0<n.length?x.some(n[0]):x.none()}}}},ws=function(t,n,e,r,o,i){return vs.go(t,n,r,o).bind(function(n){return i(n.item())?x.none():e(n.item())?x.some(n.item()):ws(t,n.item(),e,n.mode(),o,i)})},ys=function(n,t,e,r){return ws(n,t,e,vs.sidestep,bs.left(),r)},xs=function(n,t,e,r){return ws(n,t,e,vs.sidestep,bs.right(),r)},Cs=function(n,t){return 0===n.property().children(t).length},Rs=function(n,t,e,r){return ys(n,t,e,r)},Ss=function(n,t,e,r){return xs(n,t,e,r)},Ts={before:function(n,t,e){return Rs(n,t,y.curry(Cs,n),e)},after:function(n,t,e){return Ss(n,t,y.curry(Cs,n),e)},seekLeft:Rs,seekRight:Ss,walkers:function(){return{left:bs.left,right:bs.right}},walk:function(n,t,e,r,o){return vs.go(n,t,e,r,o)},backtrack:vs.backtrack,sidestep:vs.sidestep,advance:vs.advance},Ds=Le(),ks={gather:function(n,t,e){return Ts.gather(Ds,n,t,e)},before:function(n,t){return Ts.before(Ds,n,t)},after:function(n,t){return Ts.after(Ds,n,t)},seekLeft:function(n,t,e){return Ts.seekLeft(Ds,n,t,e)},seekRight:function(n,t,e){return Ts.seekRight(Ds,n,t,e)},walkers:function(){return Ts.walkers()},walk:function(n,t,e,r){return Ts.walk(Ds,n,t,e,r)}},As=Er([{none:[]},{retry:["caret"]}]),Os=function(t,n,r){return _t.closest(n,Xo).fold(y.constant(!1),function(n){return ss(t,n).exists(function(n){return e=n,(t=r).left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right();var t,e})})},Ns={point:us.getTop,adjuster:function(n,t,e,r,o){var i=us.moveUp(o,5);return Math.abs(e.top()-r.top())<1?As.retry(i):e.bottom()<o.top()?As.retry(i):e.bottom()===o.top()?As.retry(us.moveUp(o,1)):Os(n,t,o)?As.retry(us.translate(i,5,0)):As.none()},move:us.moveUp,gather:ks.before},Es={point:us.getBottom,adjuster:function(n,t,e,r,o){var i=us.moveDown(o,5);return Math.abs(e.bottom()-r.bottom())<1?As.retry(i):e.top()>o.bottom()?As.retry(i):e.top()===o.bottom()?As.retry(us.moveDown(o,1)):Os(n,t,o)?As.retry(us.translate(i,5,0)):As.none()},move:us.moveDown,gather:ks.after},Ps=function(e,r,o,i,u){return 0===u?x.some(i):(c=e,l=i.left(),s=r.point(i),c.elementFromPoint(l,s).filter(function(n){return"table"===wt.name(n)}).isSome()?(t=i,a=u-1,Ps(e,n=r,o,n.move(t,5),a)):e.situsFromPoint(i.left(),r.point(i)).bind(function(n){return n.start().fold(x.none,function(t,n){return ss(e,t,n).bind(function(n){return r.adjuster(e,t,n,o,i).fold(x.none,function(n){return Ps(e,r,o,n,u-1)})}).orThunk(function(){return x.some(i)})},x.none)}));var n,t,a,c,l,s},Bs=function(t,e,n){var r,o,i,u=t.move(n,5),a=Ps(e,t,n,u,100).getOr(u);return(r=t,o=a,i=e,r.point(o)>i.getInnerHeight()?x.some(r.point(o)-i.getInnerHeight()):r.point(o)<0?x.some(-r.point(o)):x.none()).fold(function(){return e.situsFromPoint(a.left(),t.point(a))},function(n){return e.scrollBy(0,n),e.situsFromPoint(a.left(),t.point(a)-n)})},Is={tryUp:y.curry(Bs,Ns),tryDown:y.curry(Bs,Es),ieTryUp:function(n,t){return n.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(n,t){return n.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:y.constant(5)},Ws=Er([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ms=function(n){return Ft.closest(n,"tr")},Ls={verify:function(a,n,t,e,r,c,o){return Ft.closest(e,"td,th",o).bind(function(u){return Ft.closest(n,"td,th",o).map(function(i){return et.eq(u,i)?et.eq(e,u)&&Te(u)===r?c(i):Ws.none("in same cell"):rr.sharedOne(Ms,[u,i]).fold(function(){return t=i,e=u,r=(n=a).getRect(t),(o=n.getRect(e)).right>r.left&&o.left<r.right?Ws.success():c(i);var n,t,e,r,o},function(n){return c(i)})})}).getOr(Ws.none("default"))},cata:function(n,t,e,r,o){return n.fold(t,e,r,o)},adt:Ws},qs={point:V.immutable("element","offset"),delta:V.immutable("element","deltaOffset"),range:V.immutable("element","start","finish"),points:V.immutable("begin","end"),text:V.immutable("element","text")},js=(V.immutable("ancestor","descendants","element","index"),V.immutable("parent","children","element","index")),_s=function(n,t){return P.findIndex(n,y.curry(et.eq,t))},zs=function(r){return st.parent(r).bind(function(t){var e=st.children(t);return _s(e,r).map(function(n){return js(t,e,r,n)})})},Fs=function(n){return"br"===wt.name(n)},Hs=function(n,t,e){return t(n,e).bind(function(n){return wt.isText(n)&&0===Ce.get(n).trim().length?Hs(n,t,e):x.some(n)})},Us=function(t,n,e,r){return(o=n,i=e,st.child(o,i).filter(Fs).orThunk(function(){return st.child(o,i-1).filter(Fs)})).bind(function(n){return r.traverse(n).fold(function(){return Hs(n,r.gather,t).map(r.relative)},function(n){return zs(n).map(function(n){return Xc.on(n.parent(),n.index())})})});var o,i},Vs=function(n,t,e,r){var o,i,u;return(Fs(t)?(o=n,i=t,(u=r).traverse(i).orThunk(function(){return Hs(i,u.gather,o)}).map(u.relative)):Us(n,t,e,r)).map(function(n){return{start:y.constant(n),finish:y.constant(n)}})},Gs=function(n){return Ls.cata(n,function(n){return x.none()},function(){return x.none()},function(n){return x.some(qs.point(n,0))},function(n){return x.some(qs.point(n,Te(n)))})},Xs=Zn.detect(),Ys=function(r,o,i,u,a,c){return 0===c?x.none():Js(r,o,i,u,a).bind(function(n){var t=r.fromSitus(n),e=Ls.verify(r,i,u,t.finish(),t.foffset(),a.failure,o);return Ls.cata(e,function(){return x.none()},function(){return x.some(n)},function(n){return et.eq(i,n)&&0===u?$s(r,i,u,us.moveUp,a):Ys(r,o,n,0,a,c-1)},function(n){return et.eq(i,n)&&u===Te(n)?$s(r,i,u,us.moveDown,a):Ys(r,o,n,Te(n),a,c-1)})})},$s=function(t,n,e,r,o){return ls(t,n,e).bind(function(n){return Ks(t,o,r(n,Is.getJumpSize()))})},Ks=function(n,t,e){return Xs.browser.isChrome()||Xs.browser.isSafari()||Xs.browser.isFirefox()||Xs.browser.isEdge()?t.otherRetry(n,e):Xs.browser.isIE()?t.ieRetry(n,e):x.none()},Js=function(t,n,e,r,o){return ls(t,e,r).bind(function(n){return Ks(t,o,n)})},Qs=function(t,e,r){return(o=t,i=e,u=r,o.getSelection().bind(function(r){return Vs(i,r.finish(),r.foffset(),u).fold(function(){return x.some(qs.point(r.finish(),r.foffset()))},function(n){var t=o.fromSitus(n),e=Ls.verify(o,r.finish(),r.foffset(),t.finish(),t.foffset(),u.failure,i);return Gs(e)})})).bind(function(n){return Ys(t,e,n.element(),n.offset(),r,20).map(t.fromSitus)});var o,i,u},Zs=function(n,t,e){return _t.ancestor(n,t,e).isSome()},nf=Zn.detect(),tf=function(r,o,i,n,u){return Ft.closest(n,"td,th",o).bind(function(e){return Ft.closest(e,"table",o).bind(function(n){return t=n,Zs(u,function(n){return st.parent(n).exists(function(n){return et.eq(n,t)})})?Qs(r,o,i).bind(function(t){return Ft.closest(t.finish(),"td,th",o).map(function(n){return{start:y.constant(e),finish:y.constant(n),range:y.constant(t)}})}):x.none();var t})})},ef=function(n,t,e,r,o,i){return nf.browser.isIE()?x.none():i(r,t).orThunk(function(){return tf(n,t,e,r,o).map(function(n){var t=n.range();return Gl.response(x.some(Ql(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},rf=function(n,t,e,r,o,i,u){return tf(n,e,r,o,i).bind(function(n){return os.detect(t,e,n.start(),n.finish(),u)})},of=function(n,r){return Ft.closest(n,"tr",r).bind(function(e){return Ft.closest(e,"table",r).bind(function(n){var t=Nt.descendants(n,"tr");return et.eq(e,t[0])?ks.seekLeft(n,function(n){return Ae.last(n).isSome()},r).map(function(n){var t=Te(n);return Gl.response(x.some(Ql(n,t,n,t)),!0)}):x.none()})})},uf=function(n,r){return Ft.closest(n,"tr",r).bind(function(e){return Ft.closest(e,"table",r).bind(function(n){var t=Nt.descendants(n,"tr");return et.eq(e,t[t.length-1])?ks.seekRight(n,function(n){return Ae.first(n).isSome()},r).map(function(n){return Gl.response(x.some(Ql(n,0,n,0)),!0)}):x.none()})})},af=function(n,t){return Ft.closest(n,"td,th",t)},cf={down:{traverse:st.nextSibling,gather:ks.after,relative:Xc.before,otherRetry:Is.tryDown,ieRetry:Is.ieTryDown,failure:Ls.adt.failedDown},up:{traverse:st.prevSibling,gather:ks.before,relative:Xc.before,otherRetry:Is.tryUp,ieRetry:Is.ieTryUp,failure:Ls.adt.failedUp}},lf=V.immutable("rows","cols"),sf={mouse:function(n,t,e,r){var o,i,u,a,c,l,s=es(n),f=(o=s,i=t,u=e,a=r,c=x.none(),l=function(){c=x.none()},{mousedown:function(n){a.clear(i),c=af(n.target(),u)},mouseover:function(n){c.each(function(r){a.clear(i),af(n.target(),u).each(function(e){xr(r,e,u).each(function(n){var t=n.boxes().getOr([]);(1<t.length||1===t.length&&!et.eq(r,e))&&(a.selectRange(i,t,n.start(),n.finish()),o.selectContents(e))})})})},mouseup:function(){c.each(l)}});return{mousedown:f.mousedown,mouseover:f.mouseover,mouseup:f.mouseup}},keyboard:function(n,c,l,s){var f=es(n),d=function(){return s.clear(c),x.none()};return{keydown:function(n,t,e,r,o,i){var u=n.raw().which,a=!0===n.raw().shiftKey;return Cr(c,s.selectedSelector()).fold(function(){return Kl.isDown(u)&&a?y.curry(rf,f,c,l,cf.down,r,t,s.selectRange):Kl.isUp(u)&&a?y.curry(rf,f,c,l,cf.up,r,t,s.selectRange):Kl.isDown(u)?y.curry(ef,f,l,cf.down,r,t,uf):Kl.isUp(u)?y.curry(ef,f,l,cf.up,r,t,of):x.none},function(t){var n=function(n){return function(){return ei(n,function(n){return os.update(n.rows(),n.cols(),c,t,s)}).fold(function(){return Sr(c,s.firstSelectedSelector(),s.lastSelectedSelector()).map(function(n){var t=Kl.isDown(u)||i.isForward(u)?Xc.after:Xc.before;return f.setRelativeSelection(Xc.on(n.first(),0),t(n.table())),s.clear(c),Gl.response(x.none(),!0)})},function(n){return x.some(Gl.response(x.none(),!0))})}};return Kl.isDown(u)&&a?n([lf(1,0)]):Kl.isUp(u)&&a?n([lf(-1,0)]):i.isBackward(u)&&a?n([lf(0,-1),lf(-1,0)]):i.isForward(u)&&a?n([lf(0,1),lf(1,0)]):Kl.isNavigation(u)&&!1===a?d:x.none})()},keyup:function(t,e,r,o,i){return Cr(c,s.selectedSelector()).fold(function(){var n=t.raw().which;return 0==(!0===t.raw().shiftKey)?x.none():Kl.isNavigation(n)?os.sync(c,l,e,r,o,i,s.selectRange):x.none()},x.none)}}}},ff=function(t,n){P.each(n,function(n){Mi.remove(t,n)})},df=function(t){return function(n){Mi.add(n,t)}},mf=function(t){return function(n){ff(n,t)}},gf={byClass:function(o){var i=df(o.selected()),e=mf([o.selected(),o.lastSelected(),o.firstSelected()]),u=function(n){var t=Nt.descendants(n,o.selectedSelector());P.each(t,e)};return{clear:u,selectRange:function(n,t,e,r){u(n),P.each(t,i),Mi.add(e,o.firstSelected()),Mi.add(r,o.lastSelected())},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},byAttr:function(o){var e=function(n){St.remove(n,o.selected()),St.remove(n,o.firstSelected()),St.remove(n,o.lastSelected())},i=function(n){St.set(n,o.selected(),"1")},u=function(n){var t=Nt.descendants(n,o.selectedSelector());P.each(t,e)};return{clear:u,selectRange:function(n,t,e,r){u(n),P.each(t,i),St.set(e,o.firstSelected(),"1"),St.set(r,o.lastSelected(),"1")},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}},hf=function(n){return!1===Mi.has(tn.fromDom(n.target),"ephox-snooker-resizer-bar")},pf=ja.each,vf=function(t){var e=[];function n(n){return function(){t.execCommand(n)}}pf("inserttable tableprops deletetable | cell row column".split(" "),function(n){"|"===n?e.push({text:"-"}):e.push(t.menuItems[n])}),t.addButton("table",{type:"menubutton",title:"Table",menu:e}),t.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},bf=function(t){var n,e=""===(n=t.getParam("table_toolbar",Ca))||!1===n?[]:p.isString(n)?n.split(/[ ,]/):p.isArray(n)?n:[];0<e.length&&t.addContextToolbar(function(n){return t.dom.is(n,"table")&&t.getBody().contains(n)},e.join(" "))},wf=function(o,e){var r=x.none(),i=[],u=[],a=[],c=[],l=function(n){n.disabled(!0)},s=function(n){n.disabled(!1)},n=function(){var t=this;i.push(t),r.fold(function(){l(t)},function(n){s(t)})},t=function(){var t=this;u.push(t),r.fold(function(){l(t)},function(n){s(t)})};o.on("init",function(){o.on("nodechange",function(n){var t=x.from(o.dom.getParent(o.selection.getStart(),"th,td"));(r=t.bind(function(n){var t=tn.fromDom(n);return Yt.table(t).map(function(n){return _r.forMenu(e,n,t)})})).fold(function(){P.each(i,l),P.each(u,l),P.each(a,l),P.each(c,l)},function(t){P.each(i,s),P.each(u,s),P.each(a,function(n){n.disabled(t.mergable().isNone())}),P.each(c,function(n){n.disabled(t.unmergable().isNone())})})})});var f=function(n,t,e,r){var o,i,u,a,c,l=r.getEl().getElementsByTagName("table")[0],s=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=t+1+" x "+(e+1),s&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)a=l.rows[i].childNodes[o].firstChild,c=(s?t<=o:o<=t)&&i<=e,n.dom.toggleClass(a,"mce-active",c),c&&(u=a);return u.parentNode},d=!1===o.getParam("table_grid",!0,"boolean")?{text:"Table",icon:"table",context:"table",onclick:m("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(n){n.aria&&(this.parent().hideAll(),n.stopImmediatePropagation(),o.execCommand("mceInsertTable"))},onshow:function(){f(o,0,0,this.menu.items()[0])},onhide:function(){var n=this.menu.items()[0].getEl().getElementsByTagName("a");o.dom.removeClass(n,"mce-active"),o.dom.addClass(n[0],"mce-active")},menu:[{type:"container",html:function(){var n="";n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){n+="<tr>";for(var e=0;e<10;e++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+e)+'" href="#" data-mce-x="'+e+'" data-mce-y="'+t+'"></a></td>';n+="</tr>"}return n+="</table>",n+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(n){var t,e,r=n.target;"A"===r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),e=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(t=9-t),t===this.lastX&&e===this.lastY||(f(o,t,e,n.control),this.lastX=t,this.lastY=e))},onclick:function(n){var t=this;"A"===n.target.tagName.toUpperCase()&&(n.preventDefault(),n.stopPropagation(),t.parent().cancel(),o.undoManager.transact(function(){uc(o,t.lastX+1,t.lastY+1)}),o.addVisual())}}]};function m(n){return function(){o.execCommand(n)}}var g={text:"Table properties",context:"table",onPostRender:n,onclick:m("mceTableProps")},h={text:"Delete table",context:"table",onPostRender:n,cmd:"mceTableDelete"},p={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:t},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:t},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:t},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),onPostRender:t},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:t},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:t},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:t}]},v={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:t},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:t},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:t}]},b={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:t},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:function(){var t=this;a.push(t),r.fold(function(){l(t)},function(n){t.disabled(n.mergable().isNone())})}},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:function(){var t=this;c.push(t),r.fold(function(){l(t)},function(n){t.disabled(n.unmergable().isNone())})}}]};o.addMenuItem("inserttable",d),o.addMenuItem("tableprops",g),o.addMenuItem("deletetable",h),o.addMenuItem("row",p),o.addMenuItem("column",v),o.addMenuItem("cell",b)},yf=function(e,o){return{insertTable:function(n,t){return uc(e,n,t)},setClipboardRows:function(n){return t=n,e=o,r=P.map(t,tn.fromDom),void e.set(x.from(r));var t,e,r},getClipboardRows:function(){return o.get().fold(function(){},function(n){return P.map(n,function(n){return n.dom()})})}}};u.add("tablecustom",function(t){var h,p,v,b,w,e,r=Lc(t),n=(h=t,p=r.lazyResize,v=V.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),b=x.none(),w=gf.byAttr(Nr),h.on("init",function(n){var r=h.getWin(),o=fa(h),t=ga(h),e=sf.mouse(r,o,t,w),a=sf.keyboard(r,o,t,w),c=function(n,t){!0===n.raw().shiftKey&&(t.kill()&&n.kill(),t.selection().each(function(n){var t=Kc.relative(n.start(),n.finish()),e=ul.asLtrRange(r,t);h.selection.setRng(e)}))},i=function(n){var t=s(n);if(t.raw().shiftKey&&Kl.isNavigation(t.raw().which)){var e=h.selection.getRng(),r=tn.fromDom(e.startContainer),o=tn.fromDom(e.endContainer);a.keyup(t,r,e.startOffset,o,e.endOffset).each(function(n){c(t,n)})}},u=function(n){var t=s(n);p().each(function(n){n.hideBars()});var e=h.selection.getRng(),r=tn.fromDom(h.selection.getStart()),o=tn.fromDom(e.startContainer),i=tn.fromDom(e.endContainer),u=xa.directionAt(r).isRtl()?Kl.rtl:Kl.ltr;a.keydown(t,o,e.startOffset,i,e.endOffset,u).each(function(n){c(t,n)}),p().each(function(n){n.showBars()})},l=function(n){return n.hasOwnProperty("x")&&n.hasOwnProperty("y")},s=function(n){var t=tn.fromDom(n.target),e=function(){n.stopPropagation()},r=function(){n.preventDefault()},o=y.compose(r,e);return{target:y.constant(t),x:y.constant(l(n)?n.x:null),y:y.constant(l(n)?n.y:null),stop:e,prevent:r,kill:o,raw:y.constant(n)}},f=function(n){return 0===n.button},d=function(n){f(n)&&hf(n)&&e.mousedown(s(n))},m=function(n){var t;void 0!==(t=n).buttons&&0==(1&t.buttons)||!hf(n)||e.mouseover(s(n))},g=function(n){f(n)&&hf(n)&&e.mouseup(s(n))};h.on("mousedown",d),h.on("mouseover",m),h.on("mouseup",g),h.on("keyup",i),h.on("keydown",u),h.on("nodechange",function(){var n=h.selection,t=tn.fromDom(n.getStart()),e=tn.fromDom(n.getEnd());rr.sharedOne(Yt.table,[t,e]).fold(function(){w.clear(o)},y.noop)}),b=x.some(v({mousedown:d,mouseover:m,mouseup:g,keyup:i,keydown:u}))}),{clear:w.clear,destroy:function(){b.each(function(n){})}}),o=La(t,r.lazyWire),i=(e=t,{get:function(){var n=fa(e);return Tr(n,Nr.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?Br.none():Br.single(e.selection)},function(n){return Br.multiple(n)})}}),u=No(x.none());return fc(t,o,n,i,u),zr(t,i,o,n),wf(t,i),vf(t),bf(t),t.on("PreInit",function(){t.serializer.addTempAttr(Nr.firstSelected()),t.serializer.addTempAttr(Nr.lastSelected())}),t.getParam("table_tab_navigation",!0,"boolean")&&t.on("keydown",function(n){Vl(n,t,o,r.lazyWire)}),t.on("remove",function(){r.destroy(),n.destroy()}),yf(t,u)})}();